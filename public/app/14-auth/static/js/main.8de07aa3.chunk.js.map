{"version":3,"sources":["Bejelentkezes.js","interceptor.js","Kijelentkezes.js","SzallasLista.js","SzallasSingle.js","App.js","reportWebVitals.js","index.js"],"names":["Bejelentkezes","history","useHistory","useState","isLoginPending","setLoginPending","className","onSubmit","e","preventDefault","fetch","method","body","JSON","stringify","email","target","elements","value","password","then","res","ok","Promise","resolve","reject","json","localStorage","setItem","accessToken","refreshToken","push","catch","err","alert","type","name","placeholder","fetchWithAuth","axios","create","Kijelentkezes","onClick","post","console","log","finally","removeItem","SzallasLista","szallasok","setSzallasok","isPending","setPending","useEffect","get","data","tartalom","length","map","szallas","to","id","host_name","neighbourhood","neighbourhood_group","minimum_nights","price","SzallasSingle","setSzallas","App","component","WrapperComponent","path","exact","props","match","params","szallasId","fakeURL","URLSearchParams","useLocation","search","includes","split","interceptors","request","use","config","token","getItem","headers","Authorization","error","response","originalRequest","status","isRetry","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8de07aa3.chunk.js","sourcesContent":["import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nexport function Bejelentkezes() {\n  const history = useHistory();\n  const [isLoginPending, setLoginPending] = useState(false);\n\n  function loginFormSubmit(e) {\n    e.preventDefault();\n    setLoginPending(true);\n    fetch(\"http://localhost:9090/api/login-user\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        email: e.target.elements.email.value,\n        password: e.target.elements.password.value,\n      }),\n    })\n      .then((res) => (res.ok ? Promise.resolve(res) : Promise.reject(res)))\n      .then((res) => res.json())\n      .then((res) => {\n        localStorage.setItem(\"felhasznalo-accessToken\", res.accessToken);\n        localStorage.setItem(\"felhasznalo-refreshToken\", res.refreshToken);\n        setLoginPending(false);\n        history.push(\"/osszes-szallas\");\n      })\n      .catch((err) => {\n        alert(\"Helytelen bejelentkezési adatok, kérjük próbáld újra!\");\n        setLoginPending(false);\n      });\n  }\n\n  if (isLoginPending) {\n    return (\n      <div className=\"center-item\">\n        <div className=\"spinner-border text-danger\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container-fluid d-flex justify-content-center h-100 login-container\">\n      <div className=\"card login-card\">\n        <div className=\"card-header login-card-header\">\n          <h3>Bejelentkezés</h3>\n        </div>\n        <div className=\"card-body\">\n          <form onSubmit={loginFormSubmit}>\n            <div className=\"input-group form-group\">\n              <input type=\"email\" name=\"email\" className=\"form-control\" placeholder=\"Email\" />\n            </div>\n            <div className=\"input-group form-group\">\n              <input type=\"password\" name=\"password\" className=\"form-control\" placeholder=\"Jelszó\" />\n            </div>\n            <div className=\"form-group\">\n              <button type=\"submit\" className=\"btn float-right btn-warning\">\n                Küldés\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import axios from \"axios\";\nexport const fetchWithAuth = axios.create();\n\nfetchWithAuth.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"felhasznalo-accessToken\");\n    if (!token) {\n      return config;\n    }\n\n    return {\n      ...config,\n      headers: {\n        ...config.headers,\n        Authorization: `Bearer ${token}`,\n      },\n    };\n  },\n  (error) => Promise.reject(error)\n);\n\nfetchWithAuth.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const originalRequest = error.config;\n    if (error.response.status !== 403 || originalRequest.isRetry) {\n      return Promise.reject(error);\n    }\n\n    originalRequest.isRetry = true;\n    return fetch(\"http://localhost:9090/api/get-new-access-token\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        refreshToken: localStorage.getItem(\"felhasznalo-refreshToken\"),\n      }),\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        localStorage.setItem(\"felhasznalo-accessToken\", res.accessToken);\n        return fetchWithAuth(originalRequest);\n      });\n  }\n);\n","import { useHistory } from \"react-router-dom\";\nimport { fetchWithAuth } from \"./interceptor\";\nexport function Kijelentkezes() {\n  const history = useHistory();\n  return (\n    <button\n      className=\"btn btn-danger m-3 float-right\"\n      onClick={() => {\n        fetchWithAuth\n          .post(\"http://localhost:9090/api/logout-user\")\n          .catch(console.log)\n          .finally(() => {\n            localStorage.removeItem(\"felhasznalo-accessToken\");\n            localStorage.removeItem(\"felhasznalo-refreshToken\");\n            history.push(\"/\");\n          });\n      }}\n    >\n      Kijelentkezés\n    </button>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useHistory, NavLink } from \"react-router-dom\";\nimport { fetchWithAuth } from \"./interceptor\";\nimport { Kijelentkezes } from \"./Kijelentkezes\";\nexport function SzallasLista() {\n  const [szallasok, setSzallasok] = useState([]);\n  const [isPending, setPending] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    setPending(true);\n    fetchWithAuth\n      .get(\"http://localhost:9090/api/szallasok\")\n      .then((res) => res.data)\n      .then((tartalom) => {\n        setSzallasok(tartalom);\n        setPending(false);\n      })\n      .catch(() => {\n        history.push(\"/\");\n        setPending(false);\n      });\n  }, []);\n  if (isPending || !szallasok.length) {\n    return (\n      <div className=\"center-item\">\n        <div className=\"spinner-border text-danger\"></div>\n      </div>\n    );\n  }\n  return (\n    <div>\n      <Kijelentkezes />\n      <ul className=\"list-group w-100\">\n        <div className=\"row border-bottom p-2 text-dark\">\n          <div className=\"col-xs-12 col-sm-4\">\n            <h5 className=\"visible-xs\">Megnevezés</h5>\n          </div>\n          <h5 className=\"col-xs-4 col-sm-2 right\">Helyszín</h5>\n          <h5 className=\"col-xs-8 col-sm-3\">Minimum éjszakák száma</h5>\n          <h5 className=\"col-xs-10 col-sm-2\">Ár</h5>\n        </div>\n        {szallasok.map((szallas) => (\n          <NavLink key={szallas.id} to={\"/szallas-\" + szallas.id}>\n            <div className=\"row border-bottom p-2 text-dark\">\n              <div className=\"col-xs-12 col-sm-4\">\n                <h4 className=\"visible-xs\">{szallas.name}</h4>\n                <span className=\"hidden-xs\">{szallas.host_name}</span>\n              </div>\n              <div className=\"col-xs-4 col-sm-2 right\">\n                {szallas.neighbourhood} {szallas.neighbourhood_group}\n              </div>\n              <div className=\"col-xs-8 col-sm-3\">{szallas.minimum_nights}</div>\n              <div className=\"col-xs-10 col-sm-2\">{szallas.price}$</div>\n            </div>\n          </NavLink>\n        ))}\n      </ul>\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { fetchWithAuth } from \"./interceptor\";\nimport { Kijelentkezes } from \"./Kijelentkezes\";\n\nexport function SzallasSingle({ id }) {\n  const [szallas, setSzallas] = useState({});\n  const [isPending, setPending] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    setPending(true);\n    fetchWithAuth\n      .get(\"http://localhost:9090/api/szallasok/\" + id)\n      .then((res) => res.data)\n      .then((tartalom) => {\n        setSzallas(tartalom);\n        setPending(false);\n      })\n      .catch(() => {\n        setPending(false);\n        history.push(\"/\");\n      });\n  }, []);\n\n  if (isPending || !szallas.id) {\n    return (\n      <div className=\"center-item\">\n        <div className=\"spinner-border text-danger\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"card w-100 m-auto p-3\">\n      <h1>{szallas.name}</h1>\n      <h3>{szallas.host_name}</h3>\n      <h3>\n        {szallas.neighbourhood} {szallas.neighbourhood_group}\n      </h3>\n      <h3>{szallas.minimum_nights}</h3>\n      <Kijelentkezes />\n    </div>\n  );\n}\n","import \"./App.css\";\nimport { BrowserRouter, Redirect, Route, Switch, useLocation } from \"react-router-dom\";\nimport { Bejelentkezes } from \"./Bejelentkezes\";\nimport { SzallasLista } from \"./SzallasLista\";\nimport { SzallasSingle } from \"./SzallasSingle\";\nexport function App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route component={WrapperComponent} path=\"/react-kurzus/bejelentkezesi-felulet-epitese\" />\n        <Route path=\"/bejelentkezes\" exact component={Bejelentkezes} />\n\n        <Route path=\"/osszes-szallas\" component={SzallasLista} />\n\n        <Route path=\"/szallas-:szallasId\">{(props) => <SzallasSingle id={props.match.params.szallasId} />}</Route>\n\n        <Redirect to={\"/bejelentkezes\"} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nfunction WrapperComponent(props) {\n  const fakeURL = new URLSearchParams(useLocation().search).get(\"url\");\n\n  if (!fakeURL) {\n    return <Redirect to={\"/react-kurzus/bejelentkezesi-felulet-epitese?url=/bejelentkezes\"} />;\n  }\n\n  if (fakeURL === \"/osszes-szallas\") {\n    return <SzallasLista {...props} />;\n  }\n  if (fakeURL === \"/bejelentkezes\") {\n    return <Bejelentkezes {...props} />;\n  }\n  if (fakeURL.includes(\"/szallas-\")) {\n    return <SzallasSingle id={fakeURL.split(\"-\")[1]} />;\n  }\n\n  return <Redirect to={\"/react-kurzus/bejelentkezesi-felulet-epitese?url=/bejelentkezes\"} />;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport {App} from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}