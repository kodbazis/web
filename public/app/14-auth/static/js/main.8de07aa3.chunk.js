(this["webpackJsonp16-login-system"]=this["webpackJsonp16-login-system"]||[]).push([[0],{34:function(e,t,s){},35:function(e,t,s){},60:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s(1),a=s.n(n),r=s(26),l=s.n(r),o=(s(34),s(9)),i=(s(35),s(10)),j=s(2),h=s(8);function b(){var e=Object(j.g)(),t=Object(n.useState)(!1),s=Object(h.a)(t,2),a=s[0],r=s[1];return a?Object(c.jsx)("div",{className:"center-item",children:Object(c.jsx)("div",{className:"spinner-border text-danger"})}):Object(c.jsx)("div",{className:"container-fluid d-flex justify-content-center h-100 login-container",children:Object(c.jsxs)("div",{className:"card login-card",children:[Object(c.jsx)("div",{className:"card-header login-card-header",children:Object(c.jsx)("h3",{children:"Bejelentkez\xe9s"})}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r(!0),fetch("http://localhost:9090/api/login-user",{method:"POST",body:JSON.stringify({email:t.target.elements.email.value,password:t.target.elements.password.value})}).then((function(e){return e.ok?Promise.resolve(e):Promise.reject(e)})).then((function(e){return e.json()})).then((function(t){localStorage.setItem("felhasznalo-accessToken",t.accessToken),localStorage.setItem("felhasznalo-refreshToken",t.refreshToken),r(!1),e.push("/osszes-szallas")})).catch((function(e){alert("Helytelen bejelentkez\xe9si adatok, k\xe9rj\xfck pr\xf3b\xe1ld \xfajra!"),r(!1)}))},children:[Object(c.jsx)("div",{className:"input-group form-group",children:Object(c.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Email"})}),Object(c.jsx)("div",{className:"input-group form-group",children:Object(c.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Jelsz\xf3"})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{type:"submit",className:"btn float-right btn-warning",children:"K\xfcld\xe9s"})})]})})]})})}var d=s(28),u=s.n(d).a.create();function m(){var e=Object(j.g)();return Object(c.jsx)("button",{className:"btn btn-danger m-3 float-right",onClick:function(){u.post("http://localhost:9090/api/logout-user").catch(console.log).finally((function(){localStorage.removeItem("felhasznalo-accessToken"),localStorage.removeItem("felhasznalo-refreshToken"),e.push("/")}))},children:"Kijelentkez\xe9s"})}function O(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),s=t[0],a=t[1],r=Object(n.useState)(!1),l=Object(h.a)(r,2),o=l[0],b=l[1],d=Object(j.g)();return Object(n.useEffect)((function(){b(!0),u.get("http://localhost:9090/api/szallasok").then((function(e){return e.data})).then((function(e){a(e),b(!1)})).catch((function(){d.push("/"),b(!1)}))}),[]),o||!s.length?Object(c.jsx)("div",{className:"center-item",children:Object(c.jsx)("div",{className:"spinner-border text-danger"})}):Object(c.jsxs)("div",{children:[Object(c.jsx)(m,{}),Object(c.jsxs)("ul",{className:"list-group w-100",children:[Object(c.jsxs)("div",{className:"row border-bottom p-2 text-dark",children:[Object(c.jsx)("div",{className:"col-xs-12 col-sm-4",children:Object(c.jsx)("h5",{className:"visible-xs",children:"Megnevez\xe9s"})}),Object(c.jsx)("h5",{className:"col-xs-4 col-sm-2 right",children:"Helysz\xedn"}),Object(c.jsx)("h5",{className:"col-xs-8 col-sm-3",children:"Minimum \xe9jszak\xe1k sz\xe1ma"}),Object(c.jsx)("h5",{className:"col-xs-10 col-sm-2",children:"\xc1r"})]}),s.map((function(e){return Object(c.jsx)(i.b,{to:"/szallas-"+e.id,children:Object(c.jsxs)("div",{className:"row border-bottom p-2 text-dark",children:[Object(c.jsxs)("div",{className:"col-xs-12 col-sm-4",children:[Object(c.jsx)("h4",{className:"visible-xs",children:e.name}),Object(c.jsx)("span",{className:"hidden-xs",children:e.host_name})]}),Object(c.jsxs)("div",{className:"col-xs-4 col-sm-2 right",children:[e.neighbourhood," ",e.neighbourhood_group]}),Object(c.jsx)("div",{className:"col-xs-8 col-sm-3",children:e.minimum_nights}),Object(c.jsxs)("div",{className:"col-xs-10 col-sm-2",children:[e.price,"$"]})]})},e.id)}))]})]})}function x(e){var t=e.id,s=Object(n.useState)({}),a=Object(h.a)(s,2),r=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(h.a)(o,2),b=i[0],d=i[1],O=Object(j.g)();return Object(n.useEffect)((function(){d(!0),u.get("http://localhost:9090/api/szallasok/"+t).then((function(e){return e.data})).then((function(e){l(e),d(!1)})).catch((function(){d(!1),O.push("/")}))}),[]),b||!r.id?Object(c.jsx)("div",{className:"center-item",children:Object(c.jsx)("div",{className:"spinner-border text-danger"})}):Object(c.jsxs)("div",{className:"card w-100 m-auto p-3",children:[Object(c.jsx)("h1",{children:r.name}),Object(c.jsx)("h3",{children:r.host_name}),Object(c.jsxs)("h3",{children:[r.neighbourhood," ",r.neighbourhood_group]}),Object(c.jsx)("h3",{children:r.minimum_nights}),Object(c.jsx)(m,{})]})}function f(){return Object(c.jsx)(i.a,{children:Object(c.jsxs)(j.d,{children:[Object(c.jsx)(j.b,{component:p,path:"/react-kurzus/bejelentkezesi-felulet-epitese"}),Object(c.jsx)(j.b,{path:"/bejelentkezes",exact:!0,component:b}),Object(c.jsx)(j.b,{path:"/osszes-szallas",component:O}),Object(c.jsx)(j.b,{path:"/szallas-:szallasId",children:function(e){return Object(c.jsx)(x,{id:e.match.params.szallasId})}}),Object(c.jsx)(j.a,{to:"/bejelentkezes"})]})})}function p(e){var t=new URLSearchParams(Object(j.h)().search).get("url");return t?"/osszes-szallas"===t?Object(c.jsx)(O,Object(o.a)({},e)):"/bejelentkezes"===t?Object(c.jsx)(b,Object(o.a)({},e)):t.includes("/szallas-")?Object(c.jsx)(x,{id:t.split("-")[1]}):Object(c.jsx)(j.a,{to:"/react-kurzus/bejelentkezesi-felulet-epitese?url=/bejelentkezes"}):Object(c.jsx)(j.a,{to:"/react-kurzus/bejelentkezesi-felulet-epitese?url=/bejelentkezes"})}u.interceptors.request.use((function(e){var t=localStorage.getItem("felhasznalo-accessToken");return t?Object(o.a)(Object(o.a)({},e),{},{headers:Object(o.a)(Object(o.a)({},e.headers),{},{Authorization:"Bearer ".concat(t)})}):e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;return 403!==e.response.status||t.isRetry?Promise.reject(e):(t.isRetry=!0,fetch("http://localhost:9090/api/get-new-access-token",{method:"POST",body:JSON.stringify({refreshToken:localStorage.getItem("felhasznalo-refreshToken")})}).then((function(e){return e.json()})).then((function(e){return localStorage.setItem("felhasznalo-accessToken",e.accessToken),u(t)})))}));var g=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,61)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),c(e),n(e),a(e),r(e)}))};s(59);l.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(f,{})}),document.getElementById("root")),g()}},[[60,1,2]]]);
//# sourceMappingURL=main.8de07aa3.chunk.js.map