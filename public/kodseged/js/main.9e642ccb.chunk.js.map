{"version":3,"sources":["YoutubeWithAssistantApp.js","OnSite.jsx","GifApp.js","GifWithAssistantApp.js","YoutubeApp.js","CodeAssistantClient.jsx","VimeoWithCodeAssistant.jsx","Vimeo.jsx","App.js","serviceWorker.js","index.js"],"names":["YoutubeWithAssistantApp","channel","fileChangesURL","videoId","layout","wrapperClassName","video","useRef","useState","isInit","setInit","videoStateChanged","setVideoStateChanged","currentLayout","setCurrentLayout","explicitelyActive","setExplicitelyActive","isVisible","setVisible","fontSize","setFontSize","BroadcastChannel","onmessage","postMessage","close","noop","React","useMemo","useEffect","message","data","event","wrapperElement","document","querySelector","classList","add","remove","fileChanges","setFileChanges","a","fetch","catch","console","log","res","ok","json","length","map","change","languageName","toExtension","fileName","containerRef","className","ref","opts","width","onReady","e","current","target","onStateChange","prev","Renderer","getCurrentTime","Loading","ControlButtons","style","backgroundColor","isMobile","onClick","data-tip","icon","faColumns","place","type","effect","faEye","faEyeSlash","Object","assign","createElement","href","click","faExpandArrowsAlt","faMinus","faTextWidth","faPlus","faCode","role","files","renderedFiles","setRenderedFiles","active","setActive","tick","currentTime","items","filter","item","timestamp","pop","content","latestChangedFileName","latestTimestamp","fileNames","keys","reduce","acc","cr","ret","values","setTimeout","payload","interval","setInterval","clearInterval","currentlyActiveItem","height","clientHeight","overflow","entries","key","color","parseInt","borderBottom","display","cursor","file","OnSiteApp","videoURL","onLoadedData","id","src","controls","crossOrigin","videoReference","addEventListener","gifFrames","require","GifApp","gifUrl","frames","setFrames","isPending","setPending","rawFrames","total","url","outputType","cumulative","rawFrames1","dispatch","useReducer","state","action","calcCount","Error","concat","getImage","shift","canvas","createRef","setState","parentRef","isInitialized","setInitialized","offsetWidth","img","scale","getContext","drawImage","undefined","formatLabel","minValue","maxValue","value","onChange","frameNumber","disabled","GifWithAssistantApp","showFrameNumber","text","txt","parser","DOMParser","xmlDoc","parseFromString","Array","from","firstChild","children","element","localName","innerHTML","replace","parentHeight","setParentHeight","offsetHeight","num","CodeRenderer","frame","latestFrame","YoutubeApp","CodeAssistantClient","setFiles","handlerFn","refresh","includes","init","window","faTimes","VimeoWithCodeAssistant","parseXMLfromRequest","moment","diff","startOf","headers","fromEntries","responsive","onTimeUpdate","seconds","onSeeked","VimeoApp","App","gifURL","codeAssistantYoutube","codeAssistantVimeo","youtube","vimeo","onSite","gif","codeAssistantGif","codeAssistantClient","fName","substr","lastIndexOf","Boolean","location","hostname","match","roots","getElementsByClassName","URLSearchParams","search","get","root","dataset","forEach","renderRoot","navigator","serviceWorker","ready","then","registration","unregister","error","ReactDOM","render","StrictMode","wrapperclassname","filechangesurl","videourl","videoid","gifurl","showframenumber"],"mappings":"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","file":"static/js/main.9e642ccb.chunk.js","sourcesContent":["import React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport { toExtension } from \"./App\";\nimport Highlight from \"react-highlight\";\nimport Youtube from \"react-youtube\";\nimport \"./App.css\";\nimport { isMobile } from \"react-device-detect\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faCode,\n  faColumns,\n  faExpandArrowsAlt,\n  faEye,\n  faEyeSlash,\n  faMinus,\n  faPlus,\n  faTextWidth,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport ReactTooltip from \"react-tooltip\";\n\nexport function YoutubeWithAssistantApp({ fileChangesURL, videoId, layout, wrapperClassName }) {\n  const video = useRef();\n  const [isInit, setInit] = useState();\n  const [videoStateChanged, setVideoStateChanged] = useState(0);\n  const [currentLayout, setCurrentLayout] = useState();\n  const [explicitelyActive, setExplicitelyActive] = useState(\"\");\n  const [isVisible, setVisible] = useState(false);\n  const [fontSize, setFontSize] = useState(16);\n\n  let channel;\n  try {\n    channel = new BroadcastChannel(\"codeAssistant\");\n  } catch {\n    channel = {\n      onmessage: () => {},\n      postMessage: () => {},\n      close: () => {},\n      noop: true,\n    };\n  }\n  React.useMemo(() => channel, []);\n\n  React.useEffect(() => {\n    channel.onmessage = (message) => {\n      if (message.data.event === \"clientClosed\") {\n        setVisible(false);\n      }\n    };\n    return channel.close;\n  }, []);\n\n  useEffect(() => {\n    setCurrentLayout(layout);\n  }, []);\n\n  useEffect(() => {\n    const wrapperElement = document.querySelector(`.${wrapperClassName}`);\n    if (!wrapperElement) {\n      return;\n    }\n    if (currentLayout === \"inline\") {\n      wrapperElement.classList.add(\"kodseged-inline\");\n      wrapperElement.classList.remove(\"kodseged-block\");\n    } else {\n      wrapperElement.classList.add(\"kodseged-block\");\n      wrapperElement.classList.remove(\"kodseged-inline\");\n    }\n  }, [currentLayout]);\n\n  const [fileChanges, setFileChanges] = useState([]);\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(fileChangesURL).catch(console.log);\n      if (res && !res.ok) {\n        return;\n      }\n      const fileChanges = await res.json().catch(console.log);\n      if (!fileChanges.length) {\n        return;\n      }\n      setFileChanges(fileChanges.map((change) => ({ ...change, languageName: toExtension(change.fileName) })));\n    })();\n  }, []);\n\n  const containerRef = useRef();\n\n  if (!fileChanges.length) {\n    return <div className=\"text-center\">Betöltés...</div>;\n  }\n\n  return (\n    <Fragment>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div ref={containerRef} className={(currentLayout === \"inline\" ? \"col-md-8\" : \"col-md-12\") + \" p-0 pr-1\"}>\n            <Youtube\n              opts={{\n                width: \"100%\",\n              }}\n              videoId={videoId}\n              onReady={(e) => {\n                video.current = e.target;\n                setInit(1);\n              }}\n              onStateChange={(e) => {\n                if (e.data !== 2) {\n                  return;\n                }\n                setVideoStateChanged((prev) => prev + 1);\n              }}\n            />\n          </div>\n\n          {isInit ? (\n            <Renderer\n              containerRef={containerRef}\n              fontSize={fontSize}\n              channel={channel}\n              isVisible={isVisible}\n              className=\"w-100\"\n              fileChanges={fileChanges}\n              videoStateChanged={videoStateChanged}\n              currentLayout={currentLayout}\n              setCurrentLayout={setCurrentLayout}\n              setExplicitelyActive={setExplicitelyActive}\n              explicitelyActive={explicitelyActive}\n              getCurrentTime={() => video.current.getCurrentTime()}\n            />\n          ) : (\n            Loading(currentLayout)\n          )}\n        </div>\n        <ControlButtons\n          setFontSize={setFontSize}\n          currentLayout={currentLayout}\n          setCurrentLayout={setCurrentLayout}\n          isVisible={isVisible}\n          setVisible={setVisible}\n          explicitelyActive={explicitelyActive}\n          setExplicitelyActive={setExplicitelyActive}\n          channel={channel}\n        />\n      </div>\n    </Fragment>\n  );\n}\n\nexport function ControlButtons({\n  setFontSize,\n  currentLayout,\n  setCurrentLayout,\n  isVisible,\n  setVisible,\n  explicitelyActive,\n  setExplicitelyActive,\n  channel,\n}) {\n  return (\n    <div className=\"row\" style={{ backgroundColor: \"rgb(35, 36, 31)\" }}>\n      {currentLayout === \"inline\" ? <div className=\"col-md-8\"></div> : \"\"}\n      <div className={currentLayout === \"inline\" ? \"col-md-4 border-top border-dark\" : \"col-md-12\"}>\n        {!isMobile && !isVisible ? (\n          <button\n            className=\"btn btn-sm btn-warning d-inline-block mr-2\"\n            onClick={() => {\n              if (currentLayout === \"inline\") {\n                setCurrentLayout(\"block\");\n              } else {\n                setCurrentLayout(\"inline\");\n              }\n            }}\n            data-tip=\"Nézet váltása\"\n          >\n            <FontAwesomeIcon icon={faColumns}></FontAwesomeIcon>\n            <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n          </button>\n        ) : (\n          \"\"\n        )}\n\n        <button\n          className=\"btn btn-sm btn-warning d-inline-block mr-2\"\n          onClick={() => {\n            setVisible((prev) => !prev);\n          }}\n          data-tip={isVisible ? \"Megjelenítés\" : \"Elrejtés\"}\n        >\n          <FontAwesomeIcon icon={isVisible ? faEye : faEyeSlash}></FontAwesomeIcon>\n          <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n        </button>\n        {!isVisible ? (\n          <Fragment>\n            {!channel.noop ? (\n              <button\n                className=\"btn btn-sm btn-warning d-inline-block mr-2\"\n                onClick={() => {\n                  setVisible(true);\n                  Object.assign(document.createElement(\"a\"), {\n                    target: \"_blank\",\n                    href: \"/kodseged-kliens?isFullPageClientApp=1\",\n                  }).click();\n                }}\n                data-tip=\"Teljes képernyő\"\n              >\n                <FontAwesomeIcon icon={faExpandArrowsAlt}></FontAwesomeIcon>\n                <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n              </button>\n            ) : (\n              \"\"\n            )}\n            <button\n              className=\"btn btn-sm btn-outline-warning m-1\"\n              onClick={() => {\n                setFontSize((prev) => prev - 1);\n              }}\n              data-tip=\"Betűméret csökkentése\"\n            >\n              <small>\n                <FontAwesomeIcon icon={faMinus}></FontAwesomeIcon>\n              </small>\n              <FontAwesomeIcon icon={faTextWidth}></FontAwesomeIcon>\n              <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n            </button>\n            <button\n              className=\"btn btn-sm btn-outline-warning m-1\"\n              onClick={() => {\n                setFontSize((prev) => prev + 1);\n              }}\n              data-tip=\"Betűméret növelése\"\n            >\n              <small>\n                <FontAwesomeIcon icon={faPlus}></FontAwesomeIcon>\n              </small>\n              <FontAwesomeIcon icon={faTextWidth}></FontAwesomeIcon>\n              <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n            </button>\n            <div className=\"d-inline-block\">\n              {explicitelyActive ? (\n                <button\n                  className=\"btn btn-sm btn-outline-success\"\n                  onClick={() => {\n                    if (!explicitelyActive) {\n                      return;\n                    }\n                    setExplicitelyActive(\"\");\n                  }}\n                  data-tip=\"Követés bekapcsolása\"\n                >\n                  <FontAwesomeIcon icon={faCode}></FontAwesomeIcon>\n                  <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n                </button>\n              ) : (\n                \"\"\n              )}\n            </div>\n          </Fragment>\n        ) : (\n          \"\"\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport function Loading(layout) {\n  return (\n    <div className={layout === \"inline\" ? \"col-md-4\" : \"col-md-12\" + \" text-center bg-light\"}>\n      <div className=\"d-flex justify-content-center center\">\n        <div className=\"spinner-border text-danger mr-2\" role=\"status\">\n          <span className=\"sr-only\">Betöltés...</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function Renderer({\n  containerRef,\n  channel,\n  fontSize,\n  fileChanges,\n  videoStateChanged,\n  currentLayout,\n  explicitelyActive,\n  setExplicitelyActive,\n  isVisible,\n  getCurrentTime,\n}) {\n  const files = useRef({});\n  const [renderedFiles, setRenderedFiles] = useState({});\n  const [active, setActive] = useState(\"\");\n\n  useEffect(() => {\n    const fileNames = Object.keys(fileChanges.reduce((acc, cr) => ({ ...acc, [cr.fileName]: cr }), {}));\n\n    const currentTime = getCurrentTime();\n    let ret = {};\n    for (let fileName of fileNames) {\n      const items = fileChanges\n        .filter((change) => change.fileName === fileName)\n        .filter((item) => item.timestamp < currentTime);\n      if (!items.length) {\n        continue;\n      }\n      const item = items.pop();\n      ret[fileName] = item;\n    }\n\n    files.current = ret;\n    let latestChangedFileName;\n    let latestTimestamp;\n    for (let item of Object.values(ret)) {\n      if (item.timestamp < latestTimestamp) {\n        continue;\n      }\n      latestTimestamp = item.timestamp;\n      latestChangedFileName = item.fileName;\n    }\n\n    setActive(latestChangedFileName);\n    setExplicitelyActive(\"\");\n  }, [videoStateChanged]);\n\n  useEffect(() => {\n    tick();\n    setTimeout(() => {\n      channel.postMessage({\n        event: \"init\",\n        payload: {\n          files: files.current,\n          active: active,\n        },\n      });\n    }, 100);\n  }, [videoStateChanged]);\n\n  useEffect(() => {\n    channel.onmessage = (message) => {\n      if (message.data.event === \"clientConnected\") {\n        channel.postMessage({\n          event: \"init\",\n          payload: {\n            files: files.current,\n            active: active,\n          },\n        });\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    setTimeout(() => {\n      channel.postMessage({\n        event: \"refresh\",\n        payload: {\n          files: files.current,\n          active: active,\n        },\n      });\n    }, 100);\n  }, [renderedFiles]);\n\n  useEffect(() => {\n    const interval = setInterval(tick, 50);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n\n  function tick() {\n    const currentTime = getCurrentTime();\n    const items = fileChanges.filter((item) => item.timestamp < currentTime);\n    if (!items.length) {\n      return;\n    }\n    const item = items.pop();\n    if (files.current[item.fileName]?.content === item.content) {\n      return;\n    }\n\n    files.current = {\n      ...files.current,\n      [item.fileName]: item,\n    };\n\n    setRenderedFiles(files.current);\n    setActive(item.fileName);\n  }\n\n  if (isVisible) {\n    return \"\";\n  }\n\n  const currentlyActiveItem = explicitelyActive ? explicitelyActive : active;\n  return (\n    <div\n      className={(currentLayout === \"inline\" ? \"col-md-4\" : \"col-md-12\") + \" p-0 \"}\n      style={{\n        height: containerRef.current.clientHeight,\n        overflow: 'scroll',\n        backgroundColor: \"rgb(35, 36, 31)\",\n      }}\n    >\n      {Object.entries(files.current).map(([fileName, file]) => (\n        <div\n          key={fileName}\n          className=\"text-center p-2\"\n          style={{\n            backgroundColor: currentlyActiveItem === fileName ? \"black\" : \"rgb(35, 36, 31)\",\n            color: currentlyActiveItem === fileName ? \"white\" : \"grey\",\n            width: parseInt(100 / Object.values(files.current).length) + \"%\",\n            borderBottom: \"1px solid lightgrey\",\n            display: \"inline-block\",\n            cursor: \"pointer\",\n          }}\n          onClick={() => {\n            if (active === fileName && !explicitelyActive) {\n              return;\n            }\n            setExplicitelyActive(fileName);\n          }}\n        >\n          {fileName}\n        </div>\n      ))}\n      <div className=\"overflow-auto\">\n        {Object.entries(files.current)\n          .filter(([fileName, file]) => currentlyActiveItem === fileName)\n          .map(([fileName, file]) => (\n            <div\n              key={fileName}\n              style={{\n                height: containerRef.current.clientHeight - 30 - (explicitelyActive ? 45 : 0),\n                fontSize: `${fontSize}px`,\n              }}\n              className=\"font-family-monospace\"\n            >\n              <Highlight className={file.languageName}>{file.content}</Highlight>\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n}\n","import React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport { toExtension } from \"./App\";\nimport Highlight from \"react-highlight\";\nimport { ControlButtons } from \"./YoutubeWithAssistantApp\";\n\nexport function OnSiteApp({ fileChangesURL, videoURL, layout }) {\n  const [fileChanges, setFileChanges] = useState([]);\n  const [explicitelyActive, setExplicitelyActive] = useState(\"\");\n  const [isVisible, setVisible] = useState(false);\n  const [fontSize, setFontSize] = useState(16);\n  const [currentLayout, setCurrentLayout] = useState();\n  const channel = React.useMemo(() => new BroadcastChannel(\"codeAssistant\"), []);\n\n  useEffect(() => {\n    setCurrentLayout(layout);\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(fileChangesURL).catch(console.log);\n      if (!res) {\n        return;\n      }\n\n      if (!res.ok) {\n        return;\n      }\n      const fileChanges = await res.json().catch(console.log);\n      if (!fileChanges) {\n        return;\n      }\n      setFileChanges(fileChanges.map((change) => ({ ...change, languageName: toExtension(change.fileName) })));\n    })();\n  }, []);\n\n  const ref = useRef();\n  const [isInit, setInit] = useState(false);\n\n  if (!fileChanges.length) {\n    return <div className=\"text-center\">Betöltés...</div>;\n  }\n\n  return (\n    <Fragment>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className={(currentLayout === \"inline\" ? \"col-md-8\" : \"col-md-12\") + \" p-0 pr-1\"}>\n            <video\n              onLoadedData={() => {\n                setInit(true);\n              }}\n              className=\"w-100\"\n              id=\"video\"\n              src={videoURL}\n              controls\n              width=\"100%\"\n              crossOrigin=\"anonymous\"\n              ref={ref}\n            ></video>\n          </div>\n          {ref.current ? (\n            <Renderer\n              channel={channel}\n              fontSize={fontSize}\n              isVisible={isVisible}\n              className=\"w-100\"\n              fileChanges={fileChanges}\n              explicitelyActive={explicitelyActive}\n              setExplicitelyActive={setExplicitelyActive}\n              currentLayout={currentLayout}\n              videoReference={ref}\n            />\n          ) : (\n            \"\"\n          )}\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-md-12 p-0\" style={{ backgroundColor: \"rgb(35, 36, 31)\" }}>\n            <ControlButtons\n              setFontSize={setFontSize}\n              currentLayout={currentLayout}\n              setCurrentLayout={setCurrentLayout}\n              isVisible={isVisible}\n              setVisible={setVisible}\n              explicitelyActive={explicitelyActive}\n              setExplicitelyActive={setExplicitelyActive}\n            />\n          </div>\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n\nfunction Renderer({\n  fileChanges,\n  videoReference,\n  currentLayout,\n  channel,\n  explicitelyActive,\n  setExplicitelyActive,\n  fontSize,\n  isVisible,\n}) {\n  const files = useRef({});\n  const [renderedFiles, setRenderedFiles] = useState({});\n  const [active, setActive] = useState(\"\");\n  const id = useRef();\n\n  useEffect(() => {\n    id.current = setInterval(tick, 50);\n\n    return () => {\n      clearInterval(id.current);\n    };\n  }, []);\n\n  useEffect(() => {\n    videoReference.current.addEventListener(\"seeked\", () => {\n      tick();\n      setTimeout(() => {\n        channel.postMessage({\n          event: \"init\",\n          payload: {\n            files: files.current,\n            active: active,\n          },\n        });\n      }, 100);\n    });\n  }, []);\n\n  useEffect(() => {\n    channel.onmessage = (message) => {\n      if (message.data.event === \"clientConnected\") {\n        channel.postMessage({\n          event: \"init\",\n          payload: {\n            files: files.current,\n            active: active,\n          },\n        });\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    setTimeout(() => {\n      channel.postMessage({\n        event: \"refresh\",\n        payload: {\n          files: files.current,\n          active: active,\n        },\n      });\n    }, 100);\n  }, [renderedFiles]);\n\n  useEffect(() => {\n    videoReference.current.addEventListener(\"seeked\", () => {\n      const fileNames = Object.keys(fileChanges.reduce((acc, cr) => ({ ...acc, [cr.fileName]: cr }), {}));\n\n      let ret = {};\n      for (let fileName of fileNames) {\n        const items = fileChanges\n          .filter((change) => change.fileName === fileName)\n          .filter((item) => item.timestamp < videoReference.current.currentTime);\n        if (!items.length) {\n          continue;\n        }\n        const item = items.pop();\n        ret[fileName] = item;\n      }\n\n      files.current = ret;\n      let latestChangedFileName;\n      let latestTimestamp;\n      for (let item of Object.values(ret)) {\n        if (item.timestamp < latestTimestamp) {\n          continue;\n        }\n        latestTimestamp = item.timestamp;\n        latestChangedFileName = item.fileName;\n      }\n\n      setActive(latestChangedFileName);\n      setExplicitelyActive(\"\");\n    });\n  }, []);\n\n  function tick() {\n    if (!videoReference.current) {\n      return;\n    }\n\n    const items = fileChanges.filter((item) => item.timestamp < videoReference.current.currentTime);\n    if (!items.length) {\n      return;\n    }\n    const item = items.pop();\n    if (files.current[item.fileName]?.content === item.content) {\n      return;\n    }\n\n    files.current = {\n      ...files.current,\n      [item.fileName]: item,\n    };\n    setRenderedFiles(files.current);\n    setActive(item.fileName);\n  }\n\n  if (isVisible) {\n    return \"\";\n  }\n\n  const currentlyActiveItem = explicitelyActive ? explicitelyActive : active;\n  return (\n    <div\n      className={(currentLayout === \"inline\" ? \"col-md-4\" : \"col-md-12\") + \" p-0\"}\n      style={{ height: videoReference.current.clientHeight, backgroundColor: \"rgb(35, 36, 31)\" }}\n    >\n      {Object.entries(files.current).map(([fileName, file]) => (\n        <div\n          key={fileName}\n          className=\"text-center\"\n          style={{\n            backgroundColor: currentlyActiveItem === fileName ? \"black\" : \"rgb(35, 36, 31)\",\n            color: currentlyActiveItem === fileName ? \"white\" : \"grey\",\n            width: parseInt(100 / Object.values(files.current).length) + \"%\",\n            borderBottom: \"1px solid lightgrey\",\n            height: \"30px\",\n            display: \"inline-block\",\n            cursor: \"pointer\",\n          }}\n          onClick={() => {\n            if (active === fileName && !explicitelyActive) {\n              return;\n            }\n            setExplicitelyActive(fileName);\n          }}\n        >\n          {fileName}\n        </div>\n      ))}\n      <div className=\"overflow-auto\">\n        {Object.entries(files.current)\n          .filter(([fileName, file]) => currentlyActiveItem === fileName)\n          .map(([fileName, file]) => (\n            <div\n              style={{\n                height: videoReference.current.clientHeight - 30 - (explicitelyActive ? 45 : 0),\n                fontSize: `${fontSize}px`,\n              }}\n              key={fileName}\n              className=\"font-family-monospace\"\n            >\n              <Highlight className={file.languageName}>{file.content}</Highlight>\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n}\n","import React, { createRef, Fragment, useEffect, useReducer, useRef, useState } from \"react\";\nimport InputRange from \"react-input-range\";\nconst gifFrames = require(\"gif-frames\");\n\nexport function GifApp({ gifUrl }) {\n  const [frames, setFrames] = useState([]);\n  const [isPending, setPending] = useState(true);\n  const rawFrames = useRef([]);\n  const total = useRef(2);\n\n  useEffect(() => {\n    (async () => {\n      setPending(true);\n      const rawFrames1 = await gifFrames({\n        url: gifUrl,\n        frames: \"all\",\n        outputType: \"canvas\",\n        cumulative: true,\n      });\n      setPending(false);\n      total.current = rawFrames1.length;\n      rawFrames.current = rawFrames1;\n      dispatch({ type: \"UPDATE\" });\n    })();\n  }, []);\n\n  let calcCountReducer = (state, action) => {\n    switch (action.type) {\n      case \"UPDATE\":\n        return { ...state, calcCount: state.calcCount + 1 };\n      default:\n        throw new Error(\"Invalid Action Type\");\n    }\n  };\n  let [state, dispatch] = useReducer(calcCountReducer, { calcCount: 0 });\n\n  useEffect(() => {\n    if (!rawFrames.current[0]) {\n      return;\n    }\n    setFrames((prev) => {\n      if (!rawFrames.current[0]) {\n        return prev;\n      }\n\n      return prev.concat([rawFrames.current[0].getImage()]);\n    });\n    rawFrames.current.shift();\n    setTimeout(() => {\n      dispatch({ type: \"UPDATE\" });\n    }, 0);\n  }, [state.calcCount]);\n\n  if (isPending) {\n    return (\n      <div className=\"d-flex flex-column align-items-center justify-content-center p-5 bg-light\">\n        <div className=\"row mb-2 text-danger\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"sr-only\">Betöltés...</span>\n          </div>\n        </div>\n        <div className=\"row text-dark\">\n          <strong>Betöltés...</strong>\n        </div>\n      </div>\n    );\n  }\n  return frames.length > 0 ? <Renderer frames={frames} total={total.current} calcCount={state.calcCount} /> : \"\";\n}\n\nfunction Renderer({ frames, total, calcCount }) {\n  const canvas = createRef();\n  const [state, setState] = useState(0);\n  const parentRef = useRef();\n\n  const [isInitialized, setInitialized] = useState(false);\n  useEffect(() => {\n    if (!canvas.current || isInitialized) {\n      return;\n    }\n    const width = parentRef.current.offsetWidth;\n    const img = frames[0];\n    const scale = width / img.width < 1 ? width / img.width : 1;\n    canvas.current.width = img.width * scale;\n    canvas.current.height = img.height * scale;\n    canvas.current.getContext(\"2d\").scale(scale, scale);\n    canvas.current.getContext(\"2d\").drawImage(img, 0, 0);\n    setInitialized(true);\n  }, [canvas]);\n\n  useEffect(() => {\n    if (frames[state] === undefined) {\n      return;\n    }\n    const img = frames[state];\n    const width = parentRef.current.offsetWidth;\n    const scale = width / img.width < 1 ? width / img.width : 1;\n    canvas.current.width = img.width * scale;\n    canvas.current.height = img.height * scale;\n    canvas.current.getContext(\"2d\").scale(scale, scale);\n    canvas.current.getContext(\"2d\").drawImage(img, 0, 0);\n  }, [state]);\n\n  return frames.length ? (\n    <div className=\"text-center\" ref={parentRef}>\n      <canvas className=\"text-center m-auto\" ref={canvas} />\n      <div className=\"main-scroller\">\n        <InputRange\n          formatLabel={() => \"\"}\n          minValue={0}\n          maxValue={total - 1}\n          value={state}\n          onChange={(frameNumber) => {\n            if (frameNumber > calcCount) {\n              return;\n            }\n            setState(frameNumber);\n          }}\n        />\n      </div>\n      <div className=\"buffer-indicator-track\">\n        <InputRange\n          disabled={true}\n          formatLabel={() => \"\"}\n          minValue={0}\n          maxValue={total + 1}\n          value={calcCount}\n          onChange={() => {}}\n        />\n      </div>\n    </div>\n  ) : (\n    \"\"\n  );\n}\n","import React, { createRef, Fragment, useEffect, useReducer, useRef, useState } from \"react\";\nimport InputRange from \"react-input-range\";\nimport Highlight from \"react-highlight\";\nimport { toExtension } from \"./App\";\nconst gifFrames = require(\"gif-frames\");\n\nexport function GifWithAssistantApp({ fileChangesURL, gifUrl, showFrameNumber, layout }) {\n  const [fileChanges, setFileChanges] = useState([]);\n  const [isPending, setPending] = useState(true);\n  const [frames, setFrames] = useState([]);\n  const rawFrames = useRef([]);\n  const total = useRef(1);\n\n  useEffect(() => {\n    (async () => {\n      setPending(true);\n      const rawFrames1 = await gifFrames({ url: gifUrl, frames: \"all\", outputType: \"canvas\", cumulative: true });\n      setPending(false);\n      total.current = rawFrames1.length;\n      rawFrames.current = rawFrames1;\n      dispatch({ type: \"UPDATE\" });\n    })();\n  }, []);\n\n  let calcCountReducer = (state, action) => {\n    switch (action.type) {\n      case \"UPDATE\":\n        return { ...state, calcCount: state.calcCount + 1 };\n      default:\n        throw new Error(\"Invalid Action Type\");\n    }\n  };\n  let [state, dispatch] = useReducer(calcCountReducer, { calcCount: 0 });\n\n  useEffect(() => {\n    if (!rawFrames.current[0]) {\n      return;\n    }\n\n    setFrames((prev) => {\n      if (!rawFrames.current[0]) {\n        return prev;\n      }\n\n      return prev.concat([rawFrames.current[0].getImage()]);\n    });\n    rawFrames.current.shift();\n    setTimeout(() => {\n      dispatch({ type: \"UPDATE\" });\n    }, 0);\n  }, [state.calcCount]);\n\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(fileChangesURL).catch(console.log);\n\n      if (!res.ok) {\n        return;\n      }\n      const txt = await res.text();\n\n      const parser = new DOMParser();\n      const xmlDoc = parser.parseFromString(txt, \"text/xml\");\n      const fileChanges = Array.from(xmlDoc.firstChild.children)\n        .map((item) =>\n          Array.from(item.children).reduce(\n            (acc, element) => ({\n              ...acc,\n              [element.localName]: element.localName === \"frame\" ? parseInt(element.innerHTML) : element.innerHTML,\n            }),\n            {}\n          )\n        )\n        .map((item) => ({ ...item, content: item.content.replace(\"&gt;\", \">\").replace(\"&lt;\", \"<\") }));\n\n      setFileChanges(fileChanges.map((change) => ({ ...change, languageName: toExtension(change.fileName) })));\n    })();\n  }, []);\n\n  if (isPending) {\n    return (\n      <div className=\"d-flex flex-column align-items-center justify-content-center p-5 bg-light\">\n        <div className=\"row mb-2 text-danger\">\n          <div className=\"spinner-border\" role=\"status\">\n            <span className=\"sr-only\">Betöltés...</span>\n          </div>\n        </div>\n        <div className=\"row text-dark\">\n          <strong>Betöltés...</strong>\n        </div>\n      </div>\n    );\n  }\n\n  return frames.length > 0 ? (\n    <Renderer\n      frames={frames}\n      fileChanges={fileChanges}\n      showFrameNumber={showFrameNumber}\n      layout={layout}\n      total={total.current}\n      calcCount={state.calcCount}\n    />\n  ) : (\n    \"\"\n  );\n}\n\nfunction Renderer({ frames, fileChanges, showFrameNumber, layout, total, calcCount }) {\n  const canvas = createRef();\n  const [state, setState] = useState(0);\n  const parentRef = useRef();\n  const [parentHeight, setParentHeight] = useState(0);\n  const [isInitialized, setInitialized] = useState(false);\n\n  useEffect(() => {\n    setParentHeight(parentRef.current.offsetHeight);\n  }, [parentRef.current]);\n\n  useEffect(() => {\n    if (!canvas.current || isInitialized) {\n      return;\n    }\n\n    const width = parentRef.current.offsetWidth;\n    const img = frames[0];\n    const scale = width / img.width < 1 ? width / img.width : 1;\n    canvas.current.width = img.width * scale;\n    canvas.current.height = img.height * scale;\n    canvas.current.getContext(\"2d\").scale(scale, scale);\n    canvas.current.getContext(\"2d\").drawImage(img, 0, 0);\n    setInitialized(true);\n  }, [canvas]);\n\n  useEffect(() => {\n    if (!frames[state]) {\n      return;\n    }\n    const img = frames[state];\n    const width = parentRef.current.offsetWidth;\n    const scale = width / img.width < 1 ? width / img.width : 1;\n    canvas.current.width = img.width * scale;\n    canvas.current.height = img.height * scale;\n    canvas.current.getContext(\"2d\").scale(scale, scale);\n    canvas.current.getContext(\"2d\").drawImage(img, 0, 0);\n  }, [state]);\n\n  if (layout === \"inline\") {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-7 p-0 mb-5\" ref={parentRef}>\n          <canvas ref={canvas} />\n          <div className=\"main-scroller\">\n            {total - 1 > 0 ? (\n              <InputRange\n                formatLabel={(num) => (showFrameNumber ? num : \"\")}\n                minValue={0}\n                maxValue={total - 1}\n                value={state}\n                onChange={(frameNumber) => {\n                  if (frameNumber > calcCount) {\n                    return;\n                  }\n                  setState(frameNumber);\n                }}\n              />\n            ) : (\n              \"\"\n            )}\n          </div>\n          <div className=\"buffer-indicator-track\">\n            <InputRange\n              disabled={true}\n              formatLabel={() => \"\"}\n              minValue={0}\n              maxValue={total + 1}\n              value={calcCount}\n              onChange={() => {}}\n            />\n          </div>\n        </div>\n        <div className=\"col-md-5 p-0 m-0\">\n          {parentRef.current ? <CodeRenderer fileChanges={fileChanges} frame={state} height={parentHeight} /> : \"\"}\n        </div>\n      </div>\n    );\n  }\n\n  return frames.length !== undefined ? (\n    <Fragment>\n      <div className=\"text-center mb-5\" ref={parentRef}>\n        <canvas ref={canvas} />\n        <div className=\"main-scroller\">\n          {total - 1 > 0 ? (\n            <InputRange\n              formatLabel={(num) => (showFrameNumber ? num : \"\")}\n              minValue={0}\n              maxValue={total - 1}\n              value={state}\n              onChange={(frameNumber) => {\n                if (frameNumber > calcCount) {\n                  return;\n                }\n                setState(frameNumber);\n              }}\n            />\n          ) : (\n            \"\"\n          )}\n        </div>\n        <div className=\"buffer-indicator-track\">\n          <InputRange\n            disabled={true}\n            formatLabel={() => \"\"}\n            minValue={0}\n            maxValue={total + 1}\n            value={calcCount}\n            onChange={() => {}}\n          />\n        </div>\n      </div>\n      {parentRef.current ? <CodeRenderer fileChanges={fileChanges} frame={state} height={parentHeight} /> : \"\"}\n    </Fragment>\n  ) : (\n    \"\"\n  );\n}\n\nfunction CodeRenderer({ fileChanges, frame, height }) {\n  const files = useRef({});\n  const [renderedFiles, setRenderedFiles] = useState({});\n  const [active, setActive] = useState(\"\");\n  const [explicitelyActive, setExplicitelyActive] = useState(\"\");\n\n  useEffect(() => {\n    setExplicitelyActive(\"\");\n    const fileNames = Object.keys(fileChanges.reduce((acc, cr) => ({ ...acc, [cr.fileName]: cr }), {}));\n\n    let ret = {};\n    for (let fileName of fileNames) {\n      const items = fileChanges.filter((change) => change.fileName === fileName).filter((item) => item.frame < frame);\n      if (!items.length) {\n        continue;\n      }\n      const item = items.pop();\n      ret[fileName] = item;\n    }\n\n    files.current = ret;\n    let latestChangedFileName;\n    let latestFrame;\n    for (let item of Object.values(ret)) {\n      if (item.frame < latestFrame) {\n        continue;\n      }\n      latestFrame = item.frame;\n      latestChangedFileName = item.fileName;\n    }\n    setActive(latestChangedFileName);\n  }, [frame]);\n\n  const currentlyActiveItem = explicitelyActive ? explicitelyActive : active;\n  return (\n    <div className=\"col-md-12 p-0 overflow-auto\" style={{ height: height, backgroundColor: \"rgb(35, 36, 31)\" }}>\n      {Object.entries(files.current).map(([fileName, file]) => (\n        <div\n          key={fileName}\n          className=\"text-center p-2\"\n          style={{\n            backgroundColor: currentlyActiveItem === fileName ? \"black\" : \"rgb(35, 36, 31)\",\n            color: currentlyActiveItem === fileName ? \"white\" : \"grey\",\n            width: parseInt(100 / Object.values(files.current).length) + \"%\",\n            borderBottom: \"1px solid lightgrey\",\n            display: \"inline-block\",\n            cursor: \"pointer\",\n          }}\n          onClick={() => {\n            if (active === fileName && !explicitelyActive) {\n              return;\n            }\n            setExplicitelyActive(fileName);\n          }}\n        >\n          {fileName}\n        </div>\n      ))}\n      {Object.entries(files.current)\n        .filter(([fileName, file]) => currentlyActiveItem === fileName)\n        .map(([fileName, file]) => (\n          <div key={fileName} className=\"font-family-monospace\">\n            <Highlight className={file.languageName}>{file.content}</Highlight>\n          </div>\n        ))}\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport Youtube from \"react-youtube\";\n\nexport function YoutubeApp({ videoId }) {\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-12 p-0\">\n          <Youtube\n            opts={{\n              width: \"100%\",\n            }}\n            videoId={videoId}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { faCode, faMinus, faPlus, faTextWidth, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useState } from \"react\";\nimport Highlight from \"react-highlight\";\nimport ReactTooltip from \"react-tooltip\";\n\nexport function CodeAssistantClient() {\n  const [files, setFiles] = useState({});\n  const [active, setActive] = useState(\"\");\n  const [fontSize, setFontSize] = useState(16);\n  const [explicitelyActive, setExplicitelyActive] = useState(\"\");\n\n  const channel = React.useMemo(() => new BroadcastChannel(\"codeAssistant\"), []);\n\n  React.useEffect(() => {\n    channel.postMessage({ event: \"clientConnected\" });\n    channel.onmessage = (message) => {\n      const handlerFn = {\n        refresh: (payload) => {\n          setFiles(payload.files);\n          setActive(\n            payload.active && Object.keys(payload.files).includes(payload.active)\n              ? payload.active\n              : Object.keys(payload.files).pop()\n          );\n        },\n        init: (payload) => {\n          setFiles(payload.files);\n          setActive(\n            payload.active && Object.keys(payload.files).includes(payload.active)\n              ? payload.active\n              : Object.keys(payload.files).pop()\n          );\n        },\n      }[message.data.event];\n      if (handlerFn) {\n        handlerFn(message.data.payload);\n      }\n    };\n  }, []);\n\n  const currentlyActiveItem = explicitelyActive ? explicitelyActive : active;\n  return (\n    <div\n      className=\"col-md-12 p-0 w-100\"\n      style={{\n        backgroundColor: \"rgb(35, 36, 31)\",\n      }}\n    >\n      {Object.entries(files).map(([fileName, file]) => (\n        <div\n          key={fileName}\n          className=\"text-center p-2\"\n          style={{\n            backgroundColor: currentlyActiveItem === fileName ? \"black\" : \"rgb(35, 36, 31)\",\n            color: currentlyActiveItem === fileName ? \"white\" : \"grey\",\n            width: parseInt(100 / Object.values(files).length) + \"%\",\n            borderBottom: \"1px solid lightgrey\",\n            height: \"30px\",\n            display: \"inline-block\",\n            cursor: \"pointer\",\n          }}\n          onClick={() => {\n            if (active === fileName && !explicitelyActive) {\n              return;\n            }\n            setExplicitelyActive(fileName);\n          }}\n        >\n          {fileName}\n        </div>\n      ))}\n      <div className=\"overflow-auto\">\n        {Object.entries(files)\n          .filter(([fileName, file]) => currentlyActiveItem === fileName)\n          .map(([fileName, file]) => (\n            <div key={fileName} className=\"font-family-monospace\" style={{ fontSize: `${fontSize}px` }}>\n              <Highlight className={file.languageName}>{file.content}</Highlight>\n            </div>\n          ))}\n      </div>\n      <div className=\"row p-3\">\n        <div className=\"btn-group fixed-bottom w-25\">\n          <button\n            className=\"btn btn-sm btn-warning m-1\"\n            onClick={() => {\n              setFontSize((prev) => prev - 1);\n            }}\n            data-tip=\"Betűméret csökkentése\"\n          >\n            <small>\n              <FontAwesomeIcon icon={faMinus}></FontAwesomeIcon>\n            </small>\n            <FontAwesomeIcon icon={faTextWidth}></FontAwesomeIcon>\n            <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n          </button>\n          <button\n            className=\"btn btn-sm btn-warning m-1\"\n            onClick={() => {\n              setFontSize((prev) => prev + 1);\n            }}\n            data-tip=\"Betűméret növelése\"\n          >\n            <small>\n              <FontAwesomeIcon icon={faPlus}></FontAwesomeIcon>\n            </small>\n            <FontAwesomeIcon icon={faTextWidth}></FontAwesomeIcon>\n            <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n          </button>\n          <button\n            className=\"btn btn-sm btn-danger m-1\"\n            onClick={() => {\n              channel.postMessage({ event: \"clientClosed\" });\n              window.close();\n            }}\n            data-tip=\"Bezárás\"\n          >\n            <FontAwesomeIcon icon={faTimes}></FontAwesomeIcon>\n\n            <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n          </button>\n          {explicitelyActive ? (\n            <button\n              className=\"btn btn-sm btn-success m-1\"\n              onClick={() => {\n                if (!explicitelyActive) {\n                  return;\n                }\n                setExplicitelyActive(\"\");\n              }}\n              data-tip=\"Követés bekapcsolása\"\n            >\n              <FontAwesomeIcon icon={faCode}></FontAwesomeIcon>\n              <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\n            </button>\n          ) : (\n            \"\"\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport Vimeo from \"@u-wave/react-vimeo\";\nimport { toExtension } from \"./App\";\nimport moment from \"moment\";\nimport \"./App.css\";\nimport { ControlButtons, Loading, Renderer } from \"./YoutubeWithAssistantApp\";\n\nexport default function VimeoWithCodeAssistant({ fileChangesURL, videoId, layout, wrapperClassName }) {\n  const video = useRef();\n  const [isInit, setInit] = useState();\n  const [videoStateChanged, setVideoStateChanged] = useState(0);\n  const [currentLayout, setCurrentLayout] = useState();\n  const [explicitelyActive, setExplicitelyActive] = useState(\"\");\n  const [isVisible, setVisible] = useState(false);\n  const [fontSize, setFontSize] = useState(16);\n\n  let channel;\n  try {\n    channel = new BroadcastChannel(\"codeAssistant\");\n  } catch {\n    channel = {\n      onmessage: () => {},\n      postMessage: () => {},\n      close: () => {},\n      noop: true,\n    };\n  }\n  React.useMemo(() => channel, []);\n\n  React.useEffect(() => {\n    channel.onmessage = (message) => {\n      if (message.data.event === \"clientClosed\") {\n        setVisible(false);\n      }\n    };\n    return channel.close;\n  }, []);\n\n  useEffect(() => {\n    setCurrentLayout(layout);\n  }, []);\n\n  useEffect(() => {\n    const wrapperElement = document.querySelector(`.${wrapperClassName}`);\n    if (!wrapperElement) {\n      return;\n    }\n    if (currentLayout === \"inline\") {\n      wrapperElement.classList.add(\"kodseged-inline\");\n      wrapperElement.classList.remove(\"kodseged-block\");\n    } else {\n      wrapperElement.classList.add(\"kodseged-block\");\n      wrapperElement.classList.remove(\"kodseged-inline\");\n    }\n  }, [currentLayout]);\n\n  const [fileChanges, setFileChanges] = useState([]);\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(fileChangesURL).catch(console.log);\n      if (res && !res.ok) {\n        return;\n      }\n      const headers = Object.fromEntries(Array.from(res.headers.entries()));\n      let fileChanges = [];\n      if (headers[\"content-type\"] === \"application/xml\") {\n        fileChanges = await parseXMLfromRequest(res);\n      }\n\n      if (headers[\"content-type\"] === \"application/json\") {\n        fileChanges = await res.json().catch(console.log);\n      }\n\n      if (!fileChanges?.length) {\n        return;\n      }\n      setFileChanges(fileChanges.map((change) => ({ ...change, languageName: toExtension(change.fileName) })));\n    })();\n  }, []);\n\n  async function parseXMLfromRequest(res) {\n    const txt = await res.text();\n\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(txt, \"text/xml\");\n    return Array.from(xmlDoc.firstChild.children)\n      .map((item) =>\n        Array.from(item.children).reduce(\n          (acc, element) => ({\n            ...acc,\n            [element.localName]: element.innerHTML,\n          }),\n          {}\n        )\n      )\n      .map((item) => ({ ...item, timestamp: moment(item.timestamp, \"mm:ss\").diff(moment().startOf(\"day\"), \"seconds\") }))\n      .map((item) => ({ ...item, content: item.content.replace(\"&gt;\", \">\").replace(\"&lt;\", \"<\") }))\n      .map((item) => ({ ...item, content: item.content.replace(\"<![CDATA[\\n\", \"\").replace(\"]]>\", \"\") }));\n  }\n\n  const containerRef = useRef();\n  const currentTime = useRef(0);\n\n  if (!fileChanges.length) {\n    return <div className=\"text-center\">Betöltés...</div>;\n  }\n\n  return (\n    <Fragment>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div\n            ref={containerRef}\n            className={(currentLayout === \"inline\" ? \"col-md-8\" : \"col-md-12\") + \" p-0 pr-1 border-right border-dark\"}\n            style={{ backgroundColor: \"rgb(35, 36, 31)\" }}\n          >\n            <Vimeo\n              video={videoId}\n              responsive={true}\n              onReady={(e) => {\n                video.current = e.element;\n                setInit(1);\n              }}\n              onTimeUpdate={(e) => {\n                currentTime.current = e.seconds;\n              }}\n              onSeeked={(e) => {\n                setVideoStateChanged((prev) => prev + 1);\n              }}\n            />\n          </div>\n\n          {isInit ? (\n            <Renderer\n              containerRef={containerRef}\n              fontSize={fontSize}\n              channel={channel}\n              isVisible={isVisible}\n              className=\"w-100\"\n              fileChanges={fileChanges}\n              videoReference={video}\n              videoStateChanged={videoStateChanged}\n              currentLayout={currentLayout}\n              setCurrentLayout={setCurrentLayout}\n              setExplicitelyActive={setExplicitelyActive}\n              explicitelyActive={explicitelyActive}\n              getCurrentTime={() => currentTime.current}\n            />\n          ) : (\n            Loading(currentLayout)\n          )}\n        </div>\n        <ControlButtons\n          setFontSize={setFontSize}\n          currentLayout={currentLayout}\n          setCurrentLayout={setCurrentLayout}\n          isVisible={isVisible}\n          setVisible={setVisible}\n          explicitelyActive={explicitelyActive}\n          setExplicitelyActive={setExplicitelyActive}\n          channel={channel}\n        />\n      </div>\n    </Fragment>\n  );\n}\n","import React from \"react\";\nimport Vimeo from \"@u-wave/react-vimeo\";\n\nexport function VimeoApp({ videoId }) {\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-12 p-0\">\n          <Vimeo video={videoId} responsive={true} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport \"../node_modules/highlight.js/styles/monokai-sublime.css\";\nimport \"react-input-range/lib/css/index.css\";\nimport { OnSiteApp } from \"./OnSite.jsx\";\nimport { YoutubeWithAssistantApp } from \"./YoutubeWithAssistantApp\";\nimport { GifApp } from \"./GifApp\";\nimport { GifWithAssistantApp } from \"./GifWithAssistantApp\";\nimport { YoutubeApp } from \"./YoutubeApp\";\nimport { CodeAssistantClient } from \"./CodeAssistantClient\";\nimport VimeoWithCodeAssistant from \"./VimeoWithCodeAssistant\";\nimport { VimeoApp } from \"./Vimeo\";\n\nexport default function App({\n  fileChangesURL,\n  videoURL,\n  gifURL,\n  type,\n  showFrameNumber,\n  layout,\n  videoId,\n  wrapperClassName,\n}) {\n  const res = {\n    codeAssistantYoutube: () => (\n      <YoutubeWithAssistantApp\n        layout={layout}\n        fileChangesURL={fileChangesURL}\n        videoId={videoId}\n        wrapperClassName={wrapperClassName}\n      />\n    ),\n    codeAssistantVimeo: () => (\n      <VimeoWithCodeAssistant\n        layout={layout}\n        fileChangesURL={fileChangesURL}\n        videoId={videoId}\n        wrapperClassName={wrapperClassName}\n      />\n    ),\n    youtube: () => <YoutubeApp videoId={videoId} />,\n    vimeo: () => <VimeoApp videoId={videoId} />,\n    onSite: () => <OnSiteApp layout={layout} fileChangesURL={fileChangesURL} videoURL={videoURL} />,\n    gif: () => <GifApp gifUrl={gifURL} />,\n    codeAssistantGif: () => (\n      <GifWithAssistantApp\n        fileChangesURL={fileChangesURL}\n        gifUrl={gifURL}\n        showFrameNumber={showFrameNumber}\n        layout={layout}\n      />\n    ),\n    codeAssistantClient: () => <CodeAssistantClient />,\n  }[type];\n  return res ? res() : `Invalid type (${type})`;\n}\n\nexport function toExtension(fileName) {\n  const fName = fileName ? fileName.substr(fileName.lastIndexOf(\".\") + 1) : \"plaintext\";\n  return fName === \"txt\" ? \"plaintext\" : fName;\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\n\n(function () {\n  const roots = document.getElementsByClassName(\"kodseged\");\n  if (!roots.length) {\n    return;\n  }\n\n  const urlParams = new URLSearchParams(window.location.search);\n  const isFullPage = urlParams.get(\"isFullPageClientApp\");\n\n  if (isFullPage) {\n    Array.from(roots)\n      .filter((root) => root.dataset.type === \"codeAssistantClient\")\n      .forEach(renderRoot);\n  } else {\n    Array.from(roots)\n      .filter((root) => root.dataset.type !== \"codeAssistantClient\")\n      .forEach(renderRoot);\n  }\n\n  function renderRoot(root) {\n    ReactDOM.render(\n      <React.StrictMode>\n        <App\n          wrapperClassName={root.dataset?.wrapperclassname}\n          fileChangesURL={root.dataset?.filechangesurl}\n          videoURL={root.dataset?.videourl}\n          videoId={root.dataset?.videoid}\n          type={root.dataset?.type}\n          gifURL={root.dataset?.gifurl}\n          showFrameNumber={Boolean(root.dataset?.showframenumber)}\n          layout={root.dataset?.layout}\n        />\n      </React.StrictMode>,\n      root\n    );\n  }\n\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: https://bit.ly/CRA-PWA\n  serviceWorker.unregister();\n})();\n"],"sourceRoot":""}