[
  {
    "timestamp": 132.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 137.166,
    "fileName": "index.php",
    "content": "<?php\n\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 137.849,
    "fileName": "index.php",
    "content": "<?php\n/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 138.566,
    "fileName": "index.php",
    "content": "<?php\n/** */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 138.916,
    "fileName": "index.php",
    "content": "<?php\n/* */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 139.083,
    "fileName": "index.php",
    "content": "<?php\n/* */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 139.849,
    "fileName": "index.php",
    "content": "<?php\n/*\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 139.866,
    "fileName": "index.php",
    "content": "<?php\n/*\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 140.25,
    "fileName": "index.php",
    "content": "<?php\n/*\n\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 140.65,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 141.416,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 142.233,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 271.199,
    "fileName": "subscriptionForm.phtml",
    "content": ""
  },
  {
    "timestamp": 272.316,
    "fileName": "subscriptionForm.phtml",
    "content": "div"
  },
  {
    "timestamp": 272.866,
    "fileName": "subscriptionForm.phtml",
    "content": "<div></div>"
  },
  {
    "timestamp": 273.483,
    "fileName": "subscriptionForm.phtml",
    "content": "<div>\n</div>"
  },
  {
    "timestamp": 274.75,
    "fileName": "subscriptionForm.phtml",
    "content": "<div cl>\n</div>"
  },
  {
    "timestamp": 275.199,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class>\n</div>"
  },
  {
    "timestamp": 275.516,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"\">\n</div>"
  },
  {
    "timestamp": 275.699,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"\">\n</div>"
  },
  {
    "timestamp": 275.85,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card \">\n</div>"
  },
  {
    "timestamp": 276.316,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"ca\">\n</div>"
  },
  {
    "timestamp": 276.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"car\">\n</div>"
  },
  {
    "timestamp": 276.616,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"car\">\n</div>"
  },
  {
    "timestamp": 277.25,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card \">\n</div>"
  },
  {
    "timestamp": 277.3,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card \">\n</div>"
  },
  {
    "timestamp": 278.85,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 \">\n</div>"
  },
  {
    "timestamp": 278.866,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 \">\n</div>"
  },
  {
    "timestamp": 279.1,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-\">\n</div>"
  },
  {
    "timestamp": 279.466,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n</div>"
  },
  {
    "timestamp": 279.75,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n</div>"
  },
  {
    "timestamp": 279.916,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n</div>"
  },
  {
    "timestamp": 280.466,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n\n</div>"
  },
  {
    "timestamp": 281.033,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n\n</div>"
  },
  {
    "timestamp": 281.683,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n<div class=\"jumbotron text-center\">\n        \n    </div>\n</div>"
  },
  {
    "timestamp": 282.1,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n\n    </div>\n</div>"
  },
  {
    "timestamp": 282.949,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n    \n    </div>\n</div>"
  },
  {
    "timestamp": 283.416,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        \n    </div>\n</div>"
  },
  {
    "timestamp": 283.949,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n    <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>"
  },
  {
    "timestamp": 285.566,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>"
  },
  {
    "timestamp": 288.866,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n"
  },
  {
    "timestamp": 289.399,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\nform"
  },
  {
    "timestamp": 289.949,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"\"></form>"
  },
  {
    "timestamp": 291.383,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"\"></form>"
  },
  {
    "timestamp": 292.333,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/r\"></form>"
  },
  {
    "timestamp": 292.583,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/reg\"></form>"
  },
  {
    "timestamp": 292.6,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/reg\"></form>"
  },
  {
    "timestamp": 293.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\"></form>"
  },
  {
    "timestamp": 293.6,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\"></form>"
  },
  {
    "timestamp": 294.733,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" ></form>"
  },
  {
    "timestamp": 295.566,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" met></form>"
  },
  {
    "timestamp": 295.75,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"\"></form>"
  },
  {
    "timestamp": 296.516,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"></form>"
  },
  {
    "timestamp": 296.583,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"></form>"
  },
  {
    "timestamp": 297.6,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n</form>"
  },
  {
    "timestamp": 300.666,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"> \n</form>"
  },
  {
    "timestamp": 303.3,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 307.616,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 308.333,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 309.149,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 310.866,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 312.566,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' =\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 312.683,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' =>\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 313.133,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 313.216,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 313.55,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 314.699,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'reg'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 314.766,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'reg'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 314.8,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'reg'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 315.416,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrat'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 315.883,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registration'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 316.016,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registration'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 316.883,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHa'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 317.483,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 317.533,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 319.166,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 319.183,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 319.833,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 320.149,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 320.283,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 320.633,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler()\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 320.933,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() \n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 321.333,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 321.883,
    "fileName": "index.php",
    "content": "<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    \n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 323.199,
    "fileName": "index.php",
    "content": "<?php\n/* \nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 325.949,
    "fileName": "index.php",
    "content": "<?php\n\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 326.449,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 327.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 328.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n/* \nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 330.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 333.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 338.283,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n</form>"
  },
  {
    "timestamp": 339.433,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n</form>"
  },
  {
    "timestamp": 339.833,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    \n</form>"
  },
  {
    "timestamp": 341.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"text\">\n</form>"
  },
  {
    "timestamp": 342.75,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"emai\">\n</form>"
  },
  {
    "timestamp": 343.083,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\">\n</form>"
  },
  {
    "timestamp": 343.416,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\">\n</form>"
  },
  {
    "timestamp": 343.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" >\n</form>"
  },
  {
    "timestamp": 343.783,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" >\n</form>"
  },
  {
    "timestamp": 344.3,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=>\n</form>"
  },
  {
    "timestamp": 344.433,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=>\n</form>"
  },
  {
    "timestamp": 344.933,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"\">\n</form>"
  },
  {
    "timestamp": 346.199,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 346.3,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 346.333,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 346.783,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"email\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 348.183,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"pass\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 348.516,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"passwor\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 348.8,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 348.949,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 349.233,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"email\">\n</form>"
  },
  {
    "timestamp": 350.216,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 354.333,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input  type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 355.283,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 356.066,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input  type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 356.699,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input class=\"form-control\" type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 357.899,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 358.966,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n    \n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 359.066,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n    \n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 359.966,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 360.233,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 361.833,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 361.966,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 362.3,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</label>\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 363.116,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 363.649,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 363.699,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
  },
  {
    "timestamp": 364.666,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    \n</form>"
  },
  {
    "timestamp": 365.399,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </\n</form>"
  },
  {
    "timestamp": 365.449,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </\n</form>"
  },
  {
    "timestamp": 365.899,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
  },
  {
    "timestamp": 366.483,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
  },
  {
    "timestamp": 367.1,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
  },
  {
    "timestamp": 367.516,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    b\n</form>"
  },
  {
    "timestamp": 367.766,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    b\n</form>"
  },
  {
    "timestamp": 368.199,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    button\n</form>"
  },
  {
    "timestamp": 368.716,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button></button>\n</form>"
  },
  {
    "timestamp": 370.333,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regi</button>\n</form>"
  },
  {
    "timestamp": 370.833,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regiszt</button>\n</form>"
  },
  {
    "timestamp": 371.166,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztr</button>\n</form>"
  },
  {
    "timestamp": 371.516,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztrá</button>\n</form>"
  },
  {
    "timestamp": 372,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 372.116,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 373.466,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button typ>Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 374.166,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 374.866,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"su\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 375.283,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit \">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 375.699,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 376.85,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" >Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 377.283,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 379.75,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 382.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 386.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 393.899,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 394.199,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 394.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 395.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 400.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    retur\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 400.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    retur\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 400.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 400.8,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 403.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 404.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n \n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 404.649,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 407.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 408.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 408.649,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 409.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compi\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 410.1,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compi\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 410.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate()\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 411.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(())\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 412,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate())\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 412.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 413.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 413.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 414.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 414.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", )\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 415.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 415.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        \n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 416.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        ''\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 417.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content'\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 417.149,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' =>\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 417.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' =>\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 417.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' =>\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 417.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => com\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 418.449,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('')\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 418.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml')\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 423.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', )\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 423.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', )\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 424.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 425.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 435.55,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 439.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 442.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    va\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 442.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    va\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 443.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 443.449,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 444.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 445.449,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 446.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 446.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_P)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 446.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_POST)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 447.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 448.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    \n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 449.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 449.949,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 450.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 450.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<>\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 451.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 451.85,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 464.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 465.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n    var_dump($_POST[\"email\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 467.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 475.149,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 478.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 482.149,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 482.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 482.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 484.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 487.149,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 487.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 488.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 488.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 489.1,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 489.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 490.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = get\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 490.6,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = get\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 490.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getCon\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 491.8,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 492.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 493.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 494.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 495.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 496.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 496.449,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 498.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->pre\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 499.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->prepare()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 500.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 503.05,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    \n    */\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 504.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 505.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\"\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 506.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 506.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 507.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 507.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 514.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 516.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 517.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 520.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 522.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 523.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 526.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment$pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 526.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment$pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 527.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 528.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->exec\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 529.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 530.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 535.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 536.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 538.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 539.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)   \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 541.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 541.899,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 544.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 546.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"]\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 547.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 548.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 565.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pa\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 565.649,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pa\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 566.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pass\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 567.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash()\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 569.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"])\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 571.85,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], )\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 577.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PA)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 578.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASS)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 579.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 583.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 584.649,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 589.149,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        ti\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 589.6,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 590.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 616.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 617.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    he\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 617.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 618.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 618.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 619.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Loca')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 619.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 620.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 621,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 621.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 622.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 623,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 623.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 624.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 624.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 625.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 643.85,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 647.566,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 647.6,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 649.283,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 653.483,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 653.6,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 653.633,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 653.933,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 657.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">B</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 658.649,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejel</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 658.716,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejel</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 659.116,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentk</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 659.483,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentk</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 659.716,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 660.049,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 661.483,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-suc form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 661.666,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-su form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 662.233,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn- form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 662.716,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-pr form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 663.233,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 663.483,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 663.516,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 670.183,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 672.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 673.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 673.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 674.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 675.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 675.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 676.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 678.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'l'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 679.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 680,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 680.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 680.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHan'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 681.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 685.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfun\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 685.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfun\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 686.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 686.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 687.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 687.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 688.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 688.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 689.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 690.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 690.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 690.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 691.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 701.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 701.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 701.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 702.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 702.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 702.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 706.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 706.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 706.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 707.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 708.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 708.85,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 709.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 710.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment =\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 710.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 712.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 712.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 714.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 714.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 717.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 724.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 724.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 724.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 725.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT *\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 725.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 727,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 727.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 727.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM useres\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 727.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM useres\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 727.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 728.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users W\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 728.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 729.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 729.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 730.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 730.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 731.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 733.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 734.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $st\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 734.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $st\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 735.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 736.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement-\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 736.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->ex\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 736.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->exece\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 737.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 738.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 739.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 740.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump(); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 741.85,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump(); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 742.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 742.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 743.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 743.399,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 743.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 749.6,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 750.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement-\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 751,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 751.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 751.899,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 752.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 752.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 761.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 761.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $u$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 762.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 763.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 763.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 764.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 768.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 769.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 769.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 770.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 770.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 771.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 772.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 772.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 772.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 773.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 774.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 775.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\"\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 775.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\"\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 776.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 776.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 783.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 784.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 789.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 789.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 789.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 789.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 794.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 795.6,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 795.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 796.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 796.85,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FE);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 799.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 801.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    ec\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 801.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 801.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 802.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 802.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 803.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 803.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 821.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 822.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 822.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"pa\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 823.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 823.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 825.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 825.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 826.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 827.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 828.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 828.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 829.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST[])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 830.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST[''])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 831.1,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['pas'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 831.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['passwo'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 832.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 832.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 833.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 844.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    \n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 851.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    pa\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 851.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    pass\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 852.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    password_verify()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 856.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump();\n\n    password_verify()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 857.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump();\n\n    password_verify($_POST['password'], )\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 859.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], )\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 860.399,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], $user[\"password\"])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 863.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 868.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 869.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";"
  },
  {
    "timestamp": 869.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 870.399,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerifiedpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 870.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerifiedpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 871.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 872.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    var_dump();\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 872.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 872.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 874,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 874.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 874.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 875.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 886,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 888.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 888.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 888.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 890.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 892.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 893.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 901.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 902.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 920.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 920.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 924.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    se\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 924.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    se\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 925.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    sess\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 926.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 926.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 926.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 927.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 927.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 928.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 928.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 942.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 942.899,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 943.35,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 943.899,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_S\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 945.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 950.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION[]\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 951.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 952.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['user']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 953,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 953.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 953.399,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 955.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] =\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 955.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] =\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 955.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 956.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 957.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user[]\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 957.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 958.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 958.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 959.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id'];\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 961.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 963.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 971.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 971.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    head\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 972.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 972.649,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 972.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 973.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 975.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Lo')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 975.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Loca')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 975.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Loca')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 976.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 976.899,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: ')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 976.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: ')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 977.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 977.85,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /');\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 978.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1064.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1066.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1078.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1080.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    va\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1080.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1080.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1081.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump()\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1082.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1083.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_CO)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1083.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_CO)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1084.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1084.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1085.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    \n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1087.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1087.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1087.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1093.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1095.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE[]);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1095.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE['']);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1096.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE['PHPSESSID']);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1099.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(i);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1100.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(is);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1100.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(is);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1101.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1101.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1102.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1103.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1104.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID']));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1110.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID']));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1111.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID' ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1113.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[se ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1114.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1114.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1114.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_ ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1115.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1115.849,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1115.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1116.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name() ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1117.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1127.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1128.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()])); \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1129.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])); \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1131.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()]))\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1131.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()]))\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1132.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {}\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1132.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1132.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1146.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        se\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1147.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        sess\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1147.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        sess\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1148.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start()\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1148.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1155.849,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1155.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1156.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1157.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        v\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1157.849,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1158.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump()\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1159.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1160,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SER)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1160.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SER)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1160.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION);\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1169.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION);\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1172.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1173.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1173.9,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1175.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(i); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1175.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(i); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1176.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(is); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1177.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1177.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION[])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1177.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION[''])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1178.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1178.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1179.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // \n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1181.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // vé\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1182.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1182.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1182.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1183.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett \n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1183.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalo\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1184.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1184.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom.\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1184.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1184.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1187.9,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1188.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1192.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1194.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1195.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1197.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1200.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\n\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1200.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\n\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1201.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction \n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1205.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction is\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1205.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLo\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1206.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1206.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1206.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1206.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn()\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1207.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn()\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1207.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1208.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1208.9,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1210.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1213.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bo {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1213.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bo {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1214.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1214.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1222.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1223.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1227.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        \n        \n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1228.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1230.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1230.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1231.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1232.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (isset($_SESSION['userId'])) {\n        // védett tartalom... \n    }\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1233.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        // védett tartalom... \n    }\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1235.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1236.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1237.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1237.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1238.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1238.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1239.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    \n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1241.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1241.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1241.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1242.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1242.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1247.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1248.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1250.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1251.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1254.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1255.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    \n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1256.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1256.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1257.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump()\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1257.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(is)\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1258.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLo)\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1259.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn())\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1260.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn());\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1262.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1274.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1274.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn())\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1275.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {}\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1275.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1275.849,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1276.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n    \n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1276.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1277.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1279.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n\n    }\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1282.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n\n    }\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1283.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1285.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n    return;\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1285.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n    return;\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1285.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n\n    }\n\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1286.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1287.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1287.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1287.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1288.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1289.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1289.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1291.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1328.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1330.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1333.916,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        \n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1333.95,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        \n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1334.049,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        \n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1334.533,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1335.033,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        butt\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1335.366,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        button\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1335.4,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        button\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1336.066,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button></button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1337.349,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kije</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1337.9,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelent</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1338.166,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelent</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1338.333,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelent</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1339,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1339.25,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1342.466,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1343.049,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nfor\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1343.5,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nform\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1343.549,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nform\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1344.816,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1346,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1347.766,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1347.933,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1347.966,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1348.683,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" m></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1348.849,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" m></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1349.216,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1349.783,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1350.666,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1350.833,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1351.166,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1351.466,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1351.95,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1356.049,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button >Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1356.166,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button ty>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1356.883,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1357.483,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1361.099,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" >Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1362.549,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1376.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1376.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1377.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1377.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/l'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1378.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1378.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1378.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1378.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1379.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'lo'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1379.9,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logo'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1380.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1380.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1381.599,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1381.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1381.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1382.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1383.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1383.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1383.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1384.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1384.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1385.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {\n    \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1386.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1387.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1391.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1391.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1392.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    \n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1393.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    se\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1394.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1394.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1395.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_de\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1395.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_dest\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1396.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1396.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1399.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    he\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1400.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    head\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1400.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1401.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1401.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1402.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Lo')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1402.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1403.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1403.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1404.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1404.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1404.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1405.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1405.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1415.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1415.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1416.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1425.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1427.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    set\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1427.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setc\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1427.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setc\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1428.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie()\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1431.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(se)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1431.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(sess)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1432.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1433.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1436.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1436.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1436.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1437.599,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name())\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1442.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name());\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1443.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name()  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1443.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name()  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1444.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1445.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),    );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1445.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),    );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1450.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '' );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1450.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),    );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1451.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1451.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '' );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1453.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '',  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1454.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0 );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1455.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0,  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1467.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1470.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1471.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    ses\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1472.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1472.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1472.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1473.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get_cookie_params()\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1474.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1475.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1476.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $apsession_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1477.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $asession_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1477.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params =session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1478.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1478.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1480.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1481.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1484.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0,  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1484.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1487.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1490.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1491.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1513.65,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1514.599,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    \n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1514.766,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1515.599,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <??>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1515.816,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <??>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1516.433,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1516.516,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php  ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1516.816,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php i ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1517.566,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if() ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1517.799,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if() ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1517.916,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if() ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1518.816,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1519.733,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1519.816,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1520.766,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params[]) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1521.266,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1523.2,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isA']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1523.483,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAut']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1524,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthori']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1524.133,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthori']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1524.366,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1526.183,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1526.75,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1527.066,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1527.433,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1528.083,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1528.516,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <??>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1529.033,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1529.083,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1530.033,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php en?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1530.75,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1530.95,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1531.433,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif;?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1531.7,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif; ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1532.583,
    "fileName": "wrapper.phtml",
    "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']): ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif; ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
  },
  {
    "timestamp": 1535.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1536.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1539.9,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        ''\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1541.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized'\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1542.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1542.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1542.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1543.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1543.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1545.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => is\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1545.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => is\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1546.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLo\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1546.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLo\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1547.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1551.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1554.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1558.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) { \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1560.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) { \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1560.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1562.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []) \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1563.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1563.849,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1564.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1565.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            ''\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1565.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized'\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1565.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1566.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1566.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1566.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1567.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1568.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1569.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        \n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1571.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1571.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1572.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1572.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1572.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1597.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1599.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /'); \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1606.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1612.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1612.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump()\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1613.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($)\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1613.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SER)\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1614.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER[''])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1614.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1615.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1615.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1616.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFE'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1617.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1617.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1618.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1619.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1620.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1621.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exi\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1622.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1622.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1641.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump();\n    exit;\n\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1642.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    \n\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1643.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1643.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1644.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1644.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1645.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1645.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . $_SERVER['HTTP_REFERER']);  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1647.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1678.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1678.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunc\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1679.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1679.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1680.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction get\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1680.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPath\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1681.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWith\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1681.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId()\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1682.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1682.599,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1682.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1683.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1683.783,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1684.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    \n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1685.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    retu\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1686.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return \n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1686.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return ''\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1687.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1688.599,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId$_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1689.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1691.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1694.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1695.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1696.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1696.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1697.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1697.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($u)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1698.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($url)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1699.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($url);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1699.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1699.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<>\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1700.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1701.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1707.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1708.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if()\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1708.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if()\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1709.516,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1709.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1710.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1710.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset())\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1711.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($par))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1711.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1711.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['q']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1712.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1712.483,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1712.599,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1712.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1713.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1714.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1714.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1715.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1716.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1716.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1716.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1717.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1717.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1719.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1720.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n  \n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1720.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1721.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1722.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1740.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1740.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1742.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = [];\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1743.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1744.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1744.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1746.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1746.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1746.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_st\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1747.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1753.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($par)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1753.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1754.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1754.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1756.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1756.466,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1757.333,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1757.4,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1761.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1764.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $qu)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1764.833,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $quer)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1765.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1765.599,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1766.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1767.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1768.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1768.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1768.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1769.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1770.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1771.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($quer)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1771.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1772.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1789.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    va\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1789.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1789.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1790.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1797.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1798.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1799.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['pat'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1800.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1800.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1801.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1801.616,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1801.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1802.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1803,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1803.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1804.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1804.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1805.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1805.2,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1805.95,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $q)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1806.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $query)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1806.816,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $query)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1807.266,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1808.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1808.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1809.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1809.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1810.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id']);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1817.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1818.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return ;\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1819.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1819.7,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1819.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1822.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1822.133,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1822.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER'])); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1827.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1828.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1829.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1829.45,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1830.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1830.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1831.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1832.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1846.75,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1848.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1849.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1851.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1853.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        \n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1854.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1855.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1857.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) .);  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1857.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . );  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1857.5,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1859.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1859.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1859.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1861.733,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=inva');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1862.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invali');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1862.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invali');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1863.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredene');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1863.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredene');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1864.416,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCreden');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1865.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1865.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1866.666,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1867.25,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1871.166,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1871.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /'); \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1873.9,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1877.799,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1880.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1880.849,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1900.516,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1901.566,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1903.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1904.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1904.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1905.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1905.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1905.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' =>\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1906.15,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1906.599,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1907.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1907.9,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1908.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET[]\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1908.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1910.683,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1910.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1911.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1911.866,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1912.083,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1912.366,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1912.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ??\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1913.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ??\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1913.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1915.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1916.299,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1917.349,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1918.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1918.583,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1920.099,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if () : ?>\n            \n            <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1921.25,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] ) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1921.45,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if () : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1922.883,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info']) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1923.45,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] ) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1924.049,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] === \"invalidCredentials\") : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1927.633,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] === \"invalidCredentials\") : ?>\n            <div class=\"alert alert-danger\">\n                Helytelen bejelentkezési adatok\n            </div>\n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1928.883,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1937.466,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1937.583,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1938.816,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n            <div class=\"alert alert-success\">\n                Regisztráció sikeres\n            </div>\n        <?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1940.016,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1940.933,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1952.983,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1953.316,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1954.033,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1954.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1955.533,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1956.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1956.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1957.283,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'is'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1957.383,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'is'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1957.583,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegi'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1958.883,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistr'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1959.066,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistr'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1959.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistr'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1959.633,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => 0\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1960.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1960.716,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1961.433,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false,\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1963.216,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1965.2,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1967.033,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1969.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1969.849,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1970.466,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1970.483,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1972,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1972.616,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1974.049,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1975.733,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
  },
  {
    "timestamp": 1978.583,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
  },
  {
    "timestamp": 1980.966,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
  },
  {
    "timestamp": 1981.75,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
  },
  {
    "timestamp": 1982.766,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>"
  },
  {
    "timestamp": 1983.316,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n"
  },
  {
    "timestamp": 1985.15,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n\n<?php endif ?>\n\n\n"
  },
  {
    "timestamp": 1985.9,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<?php endif ?>\n\n\n"
  },
  {
    "timestamp": 1986.65,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n\n<?php endif ?>"
  },
  {
    "timestamp": 1988.366,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
  },
  {
    "timestamp": 1995,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => true, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1995.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => true, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 1995.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => true, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2001.116,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2004.183,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2005.15,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
  },
  {
    "timestamp": 2006.533,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n        <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
  },
  {
    "timestamp": 2007.866,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
  },
  {
    "timestamp": 2009.466,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
  },
  {
    "timestamp": 2011.299,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    \n<?php endif ?>"
  },
  {
    "timestamp": 2012.2,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n        <a href=\"\">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2013.366,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2017.916,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2020.016,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2020.933,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'ur'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2021.65,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2021.766,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2022.549,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2023.099,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2023.233,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2023.966,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => getPathWithId($_SERVER['REQUEST_URI']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2025.049,
    "fileName": "index.php",
    "content": "<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => getPathWithId($_SERVER['REQUEST_URI']), \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
  },
  {
    "timestamp": 2028.416,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2029.116,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2034.366,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2036.866,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\" \">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2037.849,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2037.983,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Regisztráció</a>\n<?php endif ?>"
  },
  {
    "timestamp": 2040.066,
    "fileName": "subscriptionForm.phtml",
    "content": "<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>&isRegistration=1\">Regisztráció</a>\n<?php endif ?>"
  }
]
