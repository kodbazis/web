[
    {
       "timestamp":132.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":137.166,
       "fileName":"index.php",
       "content":"<?php\n\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":137.849,
       "fileName":"index.php",
       "content":"<?php\n/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":138.566,
       "fileName":"index.php",
       "content":"<?php\n/** */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":138.916,
       "fileName":"index.php",
       "content":"<?php\n/* */\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":139.849,
       "fileName":"index.php",
       "content":"<?php\n/*\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":140.25,
       "fileName":"index.php",
       "content":"<?php\n/*\n\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":140.65,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":141.416,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":142.233,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":258.333,
       "fileName":"subscriptionForm.phtml",
       "content":""
    },
    {
       "timestamp":259.449,
       "fileName":"subscriptionForm.phtml",
       "content":"div"
    },
    {
       "timestamp":260,
       "fileName":"subscriptionForm.phtml",
       "content":"<div></div>"
    },
    {
       "timestamp":260.616,
       "fileName":"subscriptionForm.phtml",
       "content":"<div>\n</div>"
    },
    {
       "timestamp":261.883,
       "fileName":"subscriptionForm.phtml",
       "content":"<div cl>\n</div>"
    },
    {
       "timestamp":262.333,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class>\n</div>"
    },
    {
       "timestamp":262.649,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"\">\n</div>"
    },
    {
       "timestamp":262.983,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card \">\n</div>"
    },
    {
       "timestamp":263.449,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"ca\">\n</div>"
    },
    {
       "timestamp":263.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"car\">\n</div>"
    },
    {
       "timestamp":265.983,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 \">\n</div>"
    },
    {
       "timestamp":266.233,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-\">\n</div>"
    },
    {
       "timestamp":266.6,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n</div>"
    },
    {
       "timestamp":267.6,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n\n</div>"
    },
    {
       "timestamp":268.816,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n<div class=\"jumbotron text-center\">\n        \n    </div>\n</div>"
    },
    {
       "timestamp":269.233,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n\n    </div>\n</div>"
    },
    {
       "timestamp":270.083,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n    \n    </div>\n</div>"
    },
    {
       "timestamp":270.55,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        \n    </div>\n</div>"
    },
    {
       "timestamp":271.083,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n    <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>"
    },
    {
       "timestamp":272.699,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>"
    },
    {
       "timestamp":276,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n"
    },
    {
       "timestamp":276.533,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\nform"
    },
    {
       "timestamp":277.083,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"\"></form>"
    },
    {
       "timestamp":279.466,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/r\"></form>"
    },
    {
       "timestamp":279.716,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/reg\"></form>"
    },
    {
       "timestamp":280.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\"></form>"
    },
    {
       "timestamp":281.866,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" ></form>"
    },
    {
       "timestamp":282.699,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" met></form>"
    },
    {
       "timestamp":282.883,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"\"></form>"
    },
    {
       "timestamp":283.649,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"></form>"
    },
    {
       "timestamp":284.733,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n</form>"
    },
    {
       "timestamp":287.8,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\"> \n</form>"
    },
    {
       "timestamp":290.433,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":294.75,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":295.466,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":296.283,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":299.699,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' =\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":299.816,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' =>\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":300.266,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":300.683,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":301.833,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'reg'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":302.55,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrat'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":303.016,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registration'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":304.016,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHa'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":304.616,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":306.3,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":306.966,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":307.283,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":307.766,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler()\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":308.066,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() \n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":308.466,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":309.016,
       "fileName":"index.php",
       "content":"<?php\n/*\nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    \n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":310.333,
       "fileName":"index.php",
       "content":"<?php\n/* \nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":313.083,
       "fileName":"index.php",
       "content":"<?php\n\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":313.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":315.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n/* \nINSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \nVALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n*/\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":317.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`) \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":320.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":325.416,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n</form>"
    },
    {
       "timestamp":326.566,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n</form>"
    },
    {
       "timestamp":326.966,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    \n</form>"
    },
    {
       "timestamp":328.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"text\">\n</form>"
    },
    {
       "timestamp":329.883,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"emai\">\n</form>"
    },
    {
       "timestamp":330.216,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\">\n</form>"
    },
    {
       "timestamp":330.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" >\n</form>"
    },
    {
       "timestamp":331.433,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=>\n</form>"
    },
    {
       "timestamp":332.066,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"\">\n</form>"
    },
    {
       "timestamp":333.333,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n</form>"
    },
    {
       "timestamp":333.916,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"email\" name=\"email\">\n</form>"
    },
    {
       "timestamp":335.316,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"pass\" name=\"email\">\n</form>"
    },
    {
       "timestamp":335.649,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"passwor\" name=\"email\">\n</form>"
    },
    {
       "timestamp":335.933,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"email\">\n</form>"
    },
    {
       "timestamp":337.35,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":341.466,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input  type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":342.416,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":343.199,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input  type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":343.833,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n    <input class=\"form-control\" type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":345.033,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":346.1,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n    \n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":347.1,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":347.366,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":348.966,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":349.433,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">  \n\n<label class=\"w-100\">\n                Email cím:\n    <input class=\"form-control\" type=\"email\" name=\"email\">\n</label>\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":350.25,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":350.783,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n</form>"
    },
    {
       "timestamp":351.8,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    \n</form>"
    },
    {
       "timestamp":352.533,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </\n</form>"
    },
    {
       "timestamp":353.033,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n                Jelszó:\n    <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
    },
    {
       "timestamp":353.616,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n</form>"
    },
    {
       "timestamp":354.649,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    b\n</form>"
    },
    {
       "timestamp":355.333,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    button\n</form>"
    },
    {
       "timestamp":355.85,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button></button>\n</form>"
    },
    {
       "timestamp":357.466,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regi</button>\n</form>"
    },
    {
       "timestamp":357.966,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regiszt</button>\n</form>"
    },
    {
       "timestamp":358.3,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztr</button>\n</form>"
    },
    {
       "timestamp":358.649,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztrá</button>\n</form>"
    },
    {
       "timestamp":359.133,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button>Regisztráció</button>\n</form>"
    },
    {
       "timestamp":360.6,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button typ>Regisztráció</button>\n</form>"
    },
    {
       "timestamp":361.3,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":362,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"su\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":362.416,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit \">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":362.833,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":363.983,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" >Regisztráció</button>\n</form>"
    },
    {
       "timestamp":364.416,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":369.699,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler()\n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":373.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":381.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":381.8,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n\n    \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":382.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n    \n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":387.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    retur\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":387.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":387.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":390.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":391.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n \n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":391.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":394.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":395.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo \n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":396.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compi\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":397.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate()\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":398.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(())\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":399.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate())\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":399.55,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":401.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper\")\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":401.649,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", )\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":402.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":402.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        \n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":403.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        ''\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":404.149,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content'\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":404.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' =>\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":405.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => com\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":405.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('')\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":405.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml')\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":410.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', )\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":411.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ])\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":412.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() {\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":422.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":429.85,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    va\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":430.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":431.516,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":432.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":433.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":433.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_P)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":434.1,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_POST)\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":435.1,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":436.05,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    \n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":436.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":437.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<>\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":438.35,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\"\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":438.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":451.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":452.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n    var_dump($_POST[\"email\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":454.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]);\n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":462.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n\n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":469.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":469.516,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":474.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":474.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":476.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":476.699,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":477.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = get\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":478.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getCon\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":478.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":479.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":480.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":481.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":482.6,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":483.35,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":485.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->pre\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":486.699,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->prepare()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":487.85,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\n    */\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":490.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n    /* \n    \n    */\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":491.649,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":492.449,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\"\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":493.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":493.949,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\");\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":494.516,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n    VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":494.949,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, 'peldaEMail', 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":502.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, 'peldaJelszó', '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":503.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, '123');\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":504.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`id`, `email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":507.55,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (NULL, ?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":509.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":513.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment$pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":514.149,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":515.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->exec\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":516.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":517.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute();\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":522.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":523.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":525.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)  \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":526.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`)   \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":528.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":532.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":534.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"]\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":534.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":535.35,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":552.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pa\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":553.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        pass\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":554.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash()\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":556.35,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"])\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":558.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], )\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":565.1,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PA)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":565.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASS)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":566.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT)\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":571.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":571.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        \n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":576.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        ti\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":576.733,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":577.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":603.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":604.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    he\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":605.1,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header()\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":605.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":606.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Loca')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":607.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":608.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":609.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /')\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":610.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n    echo \"<pre>\";\n    var_dump($_POST[\"email\"]); \n    var_dump($_POST[\"password\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":611.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":611.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n    \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":612.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":612.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":630.983,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":634.7,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":636.416,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":640.616,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":644.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">B</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":645.783,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejel</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":646.25,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentk</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":646.85,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":648.616,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-suc form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":648.799,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-su form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":649.366,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn- form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":649.85,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-pr form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":650.366,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":657.316,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":659.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":660.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":661.149,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":662.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":663.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":665.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'l'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":666.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'login'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":667.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHan'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":668.35,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":672.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfun\n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":673.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [ \n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler' \n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction registrationHandler() { \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\" \n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC); \n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":673.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":674.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":675.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":676.649,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":677.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":677.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":678.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":688.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":689.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":693.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":693.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":694.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":695.35,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":695.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":696.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":697.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment =\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":697.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":699.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":701.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":702.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]);\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":704.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":711.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":711.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":712.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT *\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":713.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":714.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":714.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM useres\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":715.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":715.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users W\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":715.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":716.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":717.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = \");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":718.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":721.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":722,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $st\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":722.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":723.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement-\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":723.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->ex\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":723.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->exece\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":724.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":725.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":726.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump($_POST[\"email\"]); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":727.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump(); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":728.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    var_dump(); \n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":729.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]])\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":729.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":730.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":730.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":730.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":736.733,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":737.399,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement-\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":738.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":739.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":739.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":739.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":748.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":749.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $u$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":749.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user$statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":750.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":756.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":757.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":757.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if()\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":758.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":759.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user)\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":760.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":761.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":761.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":762.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\"\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":763.35,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":763.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":770.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":770.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":771.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":776.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":777.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":781.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch();\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":782.733,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":783.399,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":783.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FE);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":786.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":788.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    ec\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":788.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":789.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":789.899,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\"\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":790.516,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":808.649,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":809.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":809.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"pa\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":810.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":812.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":813.6,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":814.85,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":815.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":816.1,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST)\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":816.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST[])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":817.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST[''])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":818.233,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['pas'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":818.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['passwo'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":819.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password'])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":820.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":831.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    \n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":838.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    pa\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":838.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    pass\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":839.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump($_POST['password']);\n\n    password_verify()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":844.1,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump();\n\n    password_verify()\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":845.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump($user[\"password\"]);\n    var_dump();\n\n    password_verify($_POST['password'], )\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":846.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], )\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":847.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], $user[\"password\"])\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":850.85,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":855.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":856.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";"
    },
    {
       "timestamp":856.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":857.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerifiedpassword_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":858.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    var_dump();\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":859.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    var_dump();\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":859.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump();\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":861.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    echo \"<pre>\";\n    var_dump();\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":861.85,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":862.149,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    var_dump($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":873.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified);\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":875.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":875.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if($isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":877.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {}\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":879.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        \n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":881.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":888.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":890.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":907.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":911.799,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    se\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":912.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    sess\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":913.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":914.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":914.649,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":914.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":915.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":929.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":930.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":930.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":931.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_S\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":932.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":938.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION[]\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":938.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":940,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['user']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":940.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":942.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] =\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":942.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":943.149,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":944.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user[]\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":945.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":945.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id']\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":946.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start(); \n    $_SESSION['userId'] = $user['id'];\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":948.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":950.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":958.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":959.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    head\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":959.399,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":959.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header()\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":960.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":962.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Lo')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":962.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Loca')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":963.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":964.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: ')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":964.799,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /')\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":964.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /');\n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":966.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler()\n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1053.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1067.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    va\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1067.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1069.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump()\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1069.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1070.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_CO)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1071.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE)\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1072.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1073.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    \n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1074.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1082.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE[]);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1082.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE['']);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1083.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump($_COOKIE['PHPSESSID']);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1086.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(i);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1087.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(is);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1088.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset);\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1090.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1091.516,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID']));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1098.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE['PHPSESSID' ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1100.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[se ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1101.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1102.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_ ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1102.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1103.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name() ]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1104.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()]));\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1115.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    var_dump(isset($_COOKIE[session_name()])); \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1117.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])); \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1118.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()]))\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1119.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {}\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1119.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1133.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        se\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1134.233,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        sess\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1135.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start()\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1135.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1142.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1144.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        v\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1144.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1145.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump()\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1146.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1147.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SER)\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1148.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id']; \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION);\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1156.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION);\n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1160.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        var_dump($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1160.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if($_SESSION); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1162.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(i); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1163.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(is); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1164.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1164.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION[])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1165.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION[''])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1165.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])); \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1167.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // \n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1169.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // vé\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1169.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1170.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett \n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1170.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalo\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1171.316,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1171.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom.\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1171.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1175.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1176.099,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) {\n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1181.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) {\n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1182.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom...\n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1185,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1187.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\n\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1188.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction \n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1192.233,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction is\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1192.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLo\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1193.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1194.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn()\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1195.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1195.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1196.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1197.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn() {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1200.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bo {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1201.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        session_start();\n\n        if(isset($_SESSION['userId'])) { \n            // védett tartalom... \n        } \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1209.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(isset($_COOKIE[session_name()])) { \n        \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1210.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        \n\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1215.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        \n        \n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1215.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1217.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if(!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n    \n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n    \n    if(!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();  \n    $_SESSION['userId'] = $user['id'];  \n    header('Location: /'); \n\n\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool {\n    if(!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    \n}\n\nfunction singleCountryHandler() \n{\n\n    \n    \n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1222.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1223.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1224.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return \n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1225.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1226.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n    \n    // védett tartalom... \n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1228.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1228.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1229.516,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1234.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1235.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1237.65,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1239.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1242.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    \n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1243.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1244.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump()\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1245.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(is)\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1245.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLo)\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1246.15,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn())\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1247.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn());\n\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1249.316,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    var_dump(isLoggedIn());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1261.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn());\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1261.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn())\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1262.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {}\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1262.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n        \n    }\n    exit;\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1263.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n    \n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1263.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1264.4,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(isLoggedIn()) {\n\n    }\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1266.65,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n\n    }\n\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1270.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n\n    }\n    echo compileTemplate(\"wrapper.phtml\", [\n        'content' => compileTemplate('subscriptionForm.phtml', [])\n    ]);\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1270.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n\n\n    return;\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1272.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n\n    }\n\n    return;\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1272.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n\n    }\n\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1273.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1274.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1276.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1276.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1276.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1278.599,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1321.049,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        \n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1321.666,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1322.166,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        butt\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1322.5,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        button\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1323.2,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button></button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1324.483,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kije</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1325.033,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelent</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1326.133,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1329.599,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1330.183,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nfor\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1330.633,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\nform\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1331.95,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1333.133,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1334.9,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1335.816,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" m></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1336.349,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1336.916,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1337.799,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\"></form>\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1337.966,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1338.299,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1338.599,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n<form action=\"/logout\" method=\"POST\">\n        <button>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1339.083,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1343.183,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button >Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1343.299,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button ty>Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1344.016,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1344.616,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1348.233,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" >Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1349.683,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1363.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1363.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1364.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/l'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1365.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1365.9,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' \n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1366.099,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => ''\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1366.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'lo'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1367.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logo'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1367.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logout'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1368.733,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1369.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1369.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1370.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1371.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1372.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() {\n    \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) { \n        return false; \n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) { \n        return false; \n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if(!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n \n \n \n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [ \n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1373.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1374.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1378.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1379.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    \n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1381.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    se\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1381.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1381.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1382.4,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_de\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1382.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_dest\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1383.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1384.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1386.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    he\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1387.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    head\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1388.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header()\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1388.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1389.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Lo')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1389.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1391.099,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /')\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1391.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy();\n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1391.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1402.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1403.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1414.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    set\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1415.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setc\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1416.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie()\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1418.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(se)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1418.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(sess)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1420.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1420.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1423.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name)\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1424.733,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name())\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1429.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name());\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1430.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name()  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1431.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1432.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),    );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1437.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '' );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1438.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1440.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '',  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1441.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0 );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1442.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0,  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1454.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1457.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    \n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1458.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    ses\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1459.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1459.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1459.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1460.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get_cookie_params()\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1461.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1463.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1463.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $apsession_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1464.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $asession_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1465.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params =session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1465.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1467.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params();\n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1468.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0,   );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1471.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0,  );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1471.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, );\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1474.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n\n    session_destroy(); \n    header('Location: /');\n\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1477.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler()\n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1478.799,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ])\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1500.783,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1501.733,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    \n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1501.9,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1502.733,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <??>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1503.566,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1503.65,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php  ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1503.95,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php i ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1504.7,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if() ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1505.95,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1506.866,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1507.9,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params[]) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1508.4,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1510.333,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isA']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1510.616,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAut']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1511.133,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthori']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1511.5,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1513.316,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n        \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1513.883,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    \n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1514.2,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1514.566,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1515.216,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1515.65,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <??>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1516.166,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1517.166,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php en?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1517.883,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1518.566,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif;?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1518.833,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']) ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif; ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1519.716,
       "fileName":"wrapper.phtml",
       "content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link rel=\"stylesheet\" href=\"/public/bootstrap.min.css\">\n    <title>Document</title>\n</head>\n\n<body>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <a class=\"navbar-brand\" href=\"/\">Országok</a>\n\n    <?php if($params['isAuthorized']): ?>\n        <form action=\"/logout\" method=\"POST\">\n            <button type=\"submit\" class=\"btn btn-sm btn-danger m-2\">Kijelentkezés</button>\n        </form>\n    <?php endif; ?>\n\n    </nav>\n    <?= $params['content'] ?>\n\n</body>\n\n</html>"
    },
    {
       "timestamp":1522.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1524,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1527.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        ''\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1528.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized'\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1529.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1530.65,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1532.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => is\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1533.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLo\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1534.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [\n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1541.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {\n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1545.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) { \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1548.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [])\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1549.65,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []) \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1550.683,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1551.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1552.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            ''\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1552.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized'\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1552.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' \n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1553.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1554.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ])\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1555.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1556.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        \n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1558.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' =>\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1558.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => \n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1559.233,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1559.9,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');\n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1586.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /'); \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1594.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1599.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1599.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump()\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1600.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($)\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1600.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SER)\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1601.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER[''])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1601.799,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1602.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1603.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFE'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1604.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER'])\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1605.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1607.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1608.9,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exi\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1609.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1610,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1658.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\n\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1658.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunc\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1659.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1660.233,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction get\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1660.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPath\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1661.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWith\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1661.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId()\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1662.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1662.799,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url)\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1663.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) \n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1663.983,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1664.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    \n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1665.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    retu\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1666.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return \n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1666.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return ''\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1667.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1668.799,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId$_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1669.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']);\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1671.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1675.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1676.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1676.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1677.316,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1678.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($u)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1678.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($url)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1679.233,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    parse_url($url);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1679.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1680.016,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<>\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1680.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\"\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1681.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1687.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1688.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if()\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1689.716,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1690.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset)\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1691.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset())\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1691.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($par))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1691.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1692.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['q']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1692.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query']))\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1693.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) \n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1694.433,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1695.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1696.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return \n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1697.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1697.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) {\n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1699.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    echo \"<pre>\";\n    var_dump($parsed);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1700.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n  \n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1701.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1701.666,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1702.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1720.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1721.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1722.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = [];\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1723.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1725.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1726.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1726.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_st\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1727.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1733.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($par)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1733.599,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1734.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1734.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1736.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1737.533,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1741.9,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1744.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $qu)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1745.033,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $quer)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1745.549,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1746.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1747.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    \n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1748.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1749.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1750.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1751.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($quer)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1751.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1752.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1769.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    va\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1769.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1770.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump()\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1777.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1778.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1779.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['pat'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1780.4,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1781.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1781.816,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . )\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1782.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1783.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1784.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\")\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1785.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" .)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1786.15,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $q)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1786.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $query)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1787.466,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams)\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1788.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams[])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1788.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams[''])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1789.583,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id'])\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1790.65,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump($parsed['path'] . \"?id=\" . $queryParams['id']);\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1797.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return '';\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1799.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return ;\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1799.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    var_dump($queryParams);\n    var_dump();\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1800.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n    echo \"<pre>\";\n    var_dump($parsed);\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1802.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n\n\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n\n\n\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1802.333,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER']));\n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1802.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(getPathWithId($_SERVER['HTTP_REFERER'])); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1807.65,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: /');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1808.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ');  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1809.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . );  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1810.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n    var_dump(); \n    exit;\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1811.116,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{\n\n    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1811.866,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1826.95,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1828.516,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1829.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1831.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        echo \"invalidCredentials\"; \n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1833.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        \n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1834.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1835.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1837.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) .);  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1837.566,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . );  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1837.7,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1839.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1840.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1841.933,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=inva');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1842.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invali');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1843.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredene');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1844.616,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCreden');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1845.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\";\n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1847.45,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        echo \"invalidCredentials\"; \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1851.366,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /');\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1852.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: /'); \n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1854.099,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1858,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: /'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1860.316,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful');\n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1861.049,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),\n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1881.766,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', []),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1883.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1884.266,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1884.966,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1885.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' =>\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1886.349,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1886.799,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1887.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1888.099,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1888.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET[]\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1889.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1890.883,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info']\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1892.066,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1892.283,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1893.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ??\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1894.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1895.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1896.5,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1898.733,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1900.299,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if () : ?>\n            \n            <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1901.45,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] ) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1901.65,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if () : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1903.083,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info']) : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1904.25,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] === \"invalidCredentials\") : ?>\n            \n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1907.833,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n        <?php if ($params['info'] === \"invalidCredentials\") : ?>\n            <div class=\"alert alert-danger\">\n                Helytelen bejelentkezési adatok\n            </div>\n        <?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1909.083,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1917.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1919.016,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n            <div class=\"alert alert-success\">\n                Regisztráció sikeres\n            </div>\n        <?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1920.216,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1921.133,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1933.183,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1936.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1936.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                ''\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1937.483,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'is'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1937.783,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegi'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1939.083,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistr'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1939.833,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => 0\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1940.316,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1940.916,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1941.633,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false,\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1943.416,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => false, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1945.4,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1947.233,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1950.049,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1950.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1952.2,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1952.816,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1954.25,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1955.933,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>"
    },
    {
       "timestamp":1958.783,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
    },
    {
       "timestamp":1961.166,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
    },
    {
       "timestamp":1961.95,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n</form>\n \n<?php else : ?>\n \n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres \n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\"> \n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n"
    },
    {
       "timestamp":1962.966,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n<?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>"
    },
    {
       "timestamp":1963.516,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n<?php endif ?>\n\n\n"
    },
    {
       "timestamp":1965.349,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n\n\n<?php endif ?>\n\n\n"
    },
    {
       "timestamp":1966.099,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n    <div class=\"alert alert-success\">\n        Regisztráció sikeres\n    </div>\n<?php endif ?>\n\n<?php if ($params['info'] === \"invalidCredentials\") : ?>\n    <div class=\"alert alert-danger\">\n        Helytelen bejelentkezési adatok\n    </div>\n<?php endif ?>\n\n<form action=\"/login\" method=\"POST\">\n    <label class=\"w-100\">\n        Email cím:\n        <input class=\"form-control\" type=\"email\" name=\"email\">\n    </label>\n\n    <label class=\"w-100\">\n        Jelszó:\n        <input class=\"form-control\" type=\"password\" name=\"password\">\n    </label>\n    <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n</form>\n\n<?php endif ?>\n\n\n"
    },
    {
       "timestamp":1966.849,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n\n<?php endif ?>"
    },
    {
       "timestamp":1968.566,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
    },
    {
       "timestamp":1975.2,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => true, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1981.316,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),, \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1984.383,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":1985.349,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
    },
    {
       "timestamp":1986.733,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n        <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
    },
    {
       "timestamp":1988.066,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
    },
    {
       "timestamp":1989.666,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n<?php endif ?>"
    },
    {
       "timestamp":1991.5,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    \n<?php endif ?>"
    },
    {
       "timestamp":1992.4,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a> \n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n        <a href=\"\">Regisztráció</a>\n<?php endif ?>"
    },
    {
       "timestamp":1993.566,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\">\n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
    },
    {
       "timestamp":2000.216,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":2001.133,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'ur'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":2001.849,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url'\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":2002.75,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":2003.299,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":2004.166,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => getPathWithId($_SERVER['REQUEST_URI']),\n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":2005.25,
       "fileName":"index.php",
       "content":"<?php\n\n// útvonalválasztó\n// https://kodbazis.hu/php-az-alapoktol/termek-listazo-website\n\n$method = $_SERVER[\"REQUEST_METHOD\"];\n$parsed = parse_url($_SERVER['REQUEST_URI']);\n$path = $parsed['path'];\n\n$routes = [\n    'GET' => [\n        '/' => 'countryListHandler',\n        '/orszag-megtekintese' => 'singleCountryHandler'\n    ],\n    'POST' => [\n        '/register' => 'registrationHandler',\n        '/login' => 'loginHandler',\n        '/logout' => 'logoutHandler'\n    ],\n];\n\n$handlerFunction = $routes[$method][$path] ?? \"notFoundHandler\";\n\n$handlerFunction();\n\nfunction getPathWithId($url) { \n    $parsed = parse_url($url);\n    if(!isset($parsed['query'])) {\n        return $url;\n    }\n    $queryParams = []; \n    parse_str($parsed['query'], $queryParams);\n    return $parsed['path'] . \"?id=\" . $queryParams['id'];\n}\n\nfunction logoutHandler() \n{    \n    session_start();\n    $params = session_get_cookie_params(); \n    setcookie(session_name(),  '', 0, $params['path'], $params['domain'], $params['secure'], isset($params['httponly']));\n    session_destroy(); \n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));   \n}\n\nfunction loginHandler()\n{\n    $pdo = getConnection();\n    $statement = $pdo->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $statement->execute([$_POST[\"email\"]]);\n    $user = $statement->fetch(PDO::FETCH_ASSOC);\n\n    if (!$user) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials');  \n        return;\n    }\n\n    $isVerified = password_verify($_POST['password'], $user[\"password\"]);\n\n    if (!$isVerified) {\n        header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=invalidCredentials'); \n        return;\n    }\n\n    session_start();\n    $_SESSION['userId'] = $user['id'];\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']));\n}\n\nfunction registrationHandler()\n{\n\n    $pdo = getConnection();\n    $statment = $pdo->prepare(\n        \"INSERT INTO `users` (`email`, `password`, `createdAt`) \n        VALUES (?, ?, ?);\"\n    );\n    $statment->execute([\n        $_POST[\"email\"],\n        password_hash($_POST[\"password\"], PASSWORD_DEFAULT),\n        time()\n    ]);\n\n    header('Location: ' . getPathWithId($_SERVER['HTTP_REFERER']) . '&info=registrationSuccessful'); \n}\n\nfunction isLoggedIn(): bool\n{\n    if (!isset($_COOKIE[session_name()])) {\n        return false;\n    }\n\n    session_start();\n\n    if (!isset($_SESSION['userId'])) {\n        return false;\n    }\n\n    return true;\n}\n\nfunction singleCountryHandler()\n{\n\n    if (!isLoggedIn()) {  \n        echo compileTemplate(\"wrapper.phtml\", [ \n            'content' => compileTemplate('subscriptionForm.phtml', [\n                'info' => $_GET['info'] ?? '',\n                'isRegistration' => isset($_GET['isRegistration']),\n                'url' => getPathWithId($_SERVER['REQUEST_URI']), \n            ]),  \n            'isAuthorized' => false,\n        ]);\n        return;\n    }\n\n\n\n    $countryId = $_GET['id'] ?? '';\n    $pdo = getConnection();\n    $statement = $pdo->prepare('SELECT * FROM countries WHERE id = ?');\n    $statement->execute([$countryId]);\n    $country = $statement->fetch(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare('SELECT * FROM `cities` WHERE countryId = ?');\n    $statement->execute([$countryId]);\n    $cities = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    $statement = $pdo->prepare(\n        'SELECT * FROM `countryLanguages` \n        JOIN languages ON languageId = languages.id \n        WHERE countryId = ?'\n    );\n    $statement->execute([$countryId]);\n    $languages = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countrySingle.phtml', [\n            'country' => $country,\n            'cities' => $cities,\n            'languages' => $languages,\n        ]),\n        'isAuthorized' => true,\n    ]);\n}\n\nfunction countryListHandler()\n{\n    $pdo = getConnection();\n\n    $statement = $pdo->prepare('SELECT * FROM countries');\n    $statement->execute();\n    $countries = $statement->fetchAll(PDO::FETCH_ASSOC);\n\n    echo compileTemplate('wrapper.phtml', [\n        'content' => compileTemplate('countryList.phtml', [\n            'countries' => $countries\n        ]),\n        'isAuthorized' => isLoggedIn()\n    ]);\n}\n\nfunction getConnection()\n{\n    return new PDO(\n        'mysql:host=' . $_SERVER['DB_HOST'] . ';dbname=' . $_SERVER['DB_NAME'],\n        $_SERVER['DB_USER'],\n        $_SERVER['DB_PASSWORD']\n    );\n}\n\n// https://kodbazis.hu/php-az-alapoktol/sablonok-szoftvertervezes-es-kompozicio\nfunction compileTemplate($filePath, $params = []): string\n{\n    ob_start();\n    require __DIR__ . \"/views/\" . $filePath;\n    return ob_get_clean();\n}\n\nfunction notFoundHandler()\n{\n    echo \"Oldal nem található\";\n}\n"
    },
    {
       "timestamp":2009.316,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
    },
    {
       "timestamp":2014.566,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"\">Regisztráció</a>\n<?php endif ?>"
    },
    {
       "timestamp":2017.066,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\" \">Regisztráció</a>\n<?php endif ?>"
    },
    {
       "timestamp":2018.049,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Regisztráció</a>\n<?php endif ?>"
    },
    {
       "timestamp":2020.266,
       "fileName":"subscriptionForm.phtml",
       "content":"<div class=\"card p-3 m-2\"> \n    <div class=\"jumbotron text-center\">\n        <h2>A tartalom megtekintéséhez bejelentkezés szükséges</h2>\n    </div>\n</div>\n\n\n<?php if ($params['isRegistration']) : ?>\n    <form action=\"/register\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-success form-control\">Regisztráció</button>\n    </form>\n    Van már felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>\">Bejelentkezés</a>\n\n<?php else : ?>\n    <?php if ($params['info'] === \"registrationSuccessful\") : ?>\n        <div class=\"alert alert-success\">\n            Regisztráció sikeres\n        </div>\n    <?php endif ?>\n\n    <?php if ($params['info'] === \"invalidCredentials\") : ?>\n        <div class=\"alert alert-danger\">\n            Helytelen bejelentkezési adatok\n        </div>\n    <?php endif ?>\n\n    <form action=\"/login\" method=\"POST\">\n        <label class=\"w-100\">\n            Email cím:\n            <input class=\"form-control\" type=\"email\" name=\"email\">\n        </label>\n\n        <label class=\"w-100\">\n            Jelszó:\n            <input class=\"form-control\" type=\"password\" name=\"password\">\n        </label>\n        <button type=\"submit\" class=\"btn btn-primary form-control\">Bejelentkezés</button>\n    </form>\n    Nincs még felhasználói fiókod?\n    <a href=\"<?= $params['url'] ?>&isRegistration=1\">Regisztráció</a>\n<?php endif ?>"
    }
 ]